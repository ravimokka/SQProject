{"ast":null,"code":"/**\n* Copyright 2012-2019, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar Registry = require('../../registry');\n\nvar Plots = require('../../plots/plots');\n\nvar axisIds = require('../../plots/cartesian/axis_ids');\n\nvar Lib = require('../../lib');\n\nvar Icons = require('../../fonts/ploticon');\n\nvar _ = Lib._;\nvar modeBarButtons = module.exports = {};\n/**\n * ModeBar buttons configuration\n *\n * @param {string} name\n *      name / id of the buttons (for tracking)\n * @param {string} title\n *      text that appears while hovering over the button,\n *      enter null, false or '' for no hover text\n * @param {string} icon\n *      svg icon object associated with the button\n *      can be linked to Plotly.Icons to use the default plotly icons\n * @param {string} [gravity]\n *      icon positioning\n * @param {function} click\n *      click handler associated with the button, a function of\n *      'gd' (the main graph object) and\n *      'ev' (the event object)\n * @param {string} [attr]\n *      attribute associated with button,\n *      use this with 'val' to keep track of the state\n * @param {*} [val]\n *      initial 'attr' value, can be a function of gd\n * @param {boolean} [toggle]\n *      is the button a toggle button?\n */\n\nmodeBarButtons.toImage = {\n  name: 'toImage',\n  title: function (gd) {\n    var opts = gd._context.toImageButtonOptions || {};\n    var format = opts.format || 'png';\n    return format === 'png' ? _(gd, 'Download plot as a png') : // legacy text\n    _(gd, 'Download plot'); // generic non-PNG text\n  },\n  icon: Icons.camera,\n  click: function (gd) {\n    var toImageButtonOptions = gd._context.toImageButtonOptions;\n    var opts = {\n      format: toImageButtonOptions.format || 'png'\n    };\n    Lib.notifier(_(gd, 'Taking snapshot - this may take a few seconds'), 'long');\n\n    if (opts.format !== 'svg' && Lib.isIE()) {\n      Lib.notifier(_(gd, 'IE only supports svg.  Changing format to svg.'), 'long');\n      opts.format = 'svg';\n    }\n\n    ['filename', 'width', 'height', 'scale'].forEach(function (key) {\n      if (key in toImageButtonOptions) {\n        opts[key] = toImageButtonOptions[key];\n      }\n    });\n    Registry.call('downloadImage', gd, opts).then(function (filename) {\n      Lib.notifier(_(gd, 'Snapshot succeeded') + ' - ' + filename, 'long');\n    }).catch(function () {\n      Lib.notifier(_(gd, 'Sorry, there was a problem downloading your snapshot!'), 'long');\n    });\n  }\n};\nmodeBarButtons.sendDataToCloud = {\n  name: 'sendDataToCloud',\n  title: function (gd) {\n    return _(gd, 'Edit in Chart Studio');\n  },\n  icon: Icons.disk,\n  click: function (gd) {\n    Plots.sendDataToCloud(gd);\n  }\n};\nmodeBarButtons.editInChartStudio = {\n  name: 'editInChartStudio',\n  title: function (gd) {\n    return _(gd, 'Edit in Chart Studio');\n  },\n  icon: Icons.pencil,\n  click: function (gd) {\n    Plots.sendDataToCloud(gd);\n  }\n};\nmodeBarButtons.zoom2d = {\n  name: 'zoom2d',\n  title: function (gd) {\n    return _(gd, 'Zoom');\n  },\n  attr: 'dragmode',\n  val: 'zoom',\n  icon: Icons.zoombox,\n  click: handleCartesian\n};\nmodeBarButtons.pan2d = {\n  name: 'pan2d',\n  title: function (gd) {\n    return _(gd, 'Pan');\n  },\n  attr: 'dragmode',\n  val: 'pan',\n  icon: Icons.pan,\n  click: handleCartesian\n};\nmodeBarButtons.select2d = {\n  name: 'select2d',\n  title: function (gd) {\n    return _(gd, 'Box Select');\n  },\n  attr: 'dragmode',\n  val: 'select',\n  icon: Icons.selectbox,\n  click: handleCartesian\n};\nmodeBarButtons.lasso2d = {\n  name: 'lasso2d',\n  title: function (gd) {\n    return _(gd, 'Lasso Select');\n  },\n  attr: 'dragmode',\n  val: 'lasso',\n  icon: Icons.lasso,\n  click: handleCartesian\n};\nmodeBarButtons.zoomIn2d = {\n  name: 'zoomIn2d',\n  title: function (gd) {\n    return _(gd, 'Zoom in');\n  },\n  attr: 'zoom',\n  val: 'in',\n  icon: Icons.zoom_plus,\n  click: handleCartesian\n};\nmodeBarButtons.zoomOut2d = {\n  name: 'zoomOut2d',\n  title: function (gd) {\n    return _(gd, 'Zoom out');\n  },\n  attr: 'zoom',\n  val: 'out',\n  icon: Icons.zoom_minus,\n  click: handleCartesian\n};\nmodeBarButtons.autoScale2d = {\n  name: 'autoScale2d',\n  title: function (gd) {\n    return _(gd, 'Autoscale');\n  },\n  attr: 'zoom',\n  val: 'auto',\n  icon: Icons.autoscale,\n  click: handleCartesian\n};\nmodeBarButtons.resetScale2d = {\n  name: 'resetScale2d',\n  title: function (gd) {\n    return _(gd, 'Reset axes');\n  },\n  attr: 'zoom',\n  val: 'reset',\n  icon: Icons.home,\n  click: handleCartesian\n};\nmodeBarButtons.hoverClosestCartesian = {\n  name: 'hoverClosestCartesian',\n  title: function (gd) {\n    return _(gd, 'Show closest data on hover');\n  },\n  attr: 'hovermode',\n  val: 'closest',\n  icon: Icons.tooltip_basic,\n  gravity: 'ne',\n  click: handleCartesian\n};\nmodeBarButtons.hoverCompareCartesian = {\n  name: 'hoverCompareCartesian',\n  title: function (gd) {\n    return _(gd, 'Compare data on hover');\n  },\n  attr: 'hovermode',\n  val: function (gd) {\n    return gd._fullLayout._isHoriz ? 'y' : 'x';\n  },\n  icon: Icons.tooltip_compare,\n  gravity: 'ne',\n  click: handleCartesian\n};\n\nfunction handleCartesian(gd, ev) {\n  var button = ev.currentTarget;\n  var astr = button.getAttribute('data-attr');\n  var val = button.getAttribute('data-val') || true;\n  var fullLayout = gd._fullLayout;\n  var aobj = {};\n  var axList = axisIds.list(gd, null, true);\n  var allSpikesEnabled = fullLayout._cartesianSpikesEnabled;\n  var ax, i;\n\n  if (astr === 'zoom') {\n    var mag = val === 'in' ? 0.5 : 2;\n    var r0 = (1 + mag) / 2;\n    var r1 = (1 - mag) / 2;\n    var axName;\n\n    for (i = 0; i < axList.length; i++) {\n      ax = axList[i];\n\n      if (!ax.fixedrange) {\n        axName = ax._name;\n\n        if (val === 'auto') {\n          aobj[axName + '.autorange'] = true;\n        } else if (val === 'reset') {\n          if (ax._rangeInitial === undefined) {\n            aobj[axName + '.autorange'] = true;\n          } else {\n            var rangeInitial = ax._rangeInitial.slice();\n\n            aobj[axName + '.range[0]'] = rangeInitial[0];\n            aobj[axName + '.range[1]'] = rangeInitial[1];\n          } // N.B. \"reset\" also resets showspikes\n\n\n          if (ax._showSpikeInitial !== undefined) {\n            aobj[axName + '.showspikes'] = ax._showSpikeInitial;\n\n            if (allSpikesEnabled === 'on' && !ax._showSpikeInitial) {\n              allSpikesEnabled = 'off';\n            }\n          }\n        } else {\n          var rangeNow = [ax.r2l(ax.range[0]), ax.r2l(ax.range[1])];\n          var rangeNew = [r0 * rangeNow[0] + r1 * rangeNow[1], r0 * rangeNow[1] + r1 * rangeNow[0]];\n          aobj[axName + '.range[0]'] = ax.l2r(rangeNew[0]);\n          aobj[axName + '.range[1]'] = ax.l2r(rangeNew[1]);\n        }\n      }\n    }\n  } else {\n    // if ALL traces have orientation 'h', 'hovermode': 'x' otherwise: 'y'\n    if (astr === 'hovermode' && (val === 'x' || val === 'y')) {\n      val = fullLayout._isHoriz ? 'y' : 'x';\n      button.setAttribute('data-val', val);\n    }\n\n    aobj[astr] = val;\n  }\n\n  fullLayout._cartesianSpikesEnabled = allSpikesEnabled;\n  Registry.call('_guiRelayout', gd, aobj);\n}\n\nmodeBarButtons.zoom3d = {\n  name: 'zoom3d',\n  title: function (gd) {\n    return _(gd, 'Zoom');\n  },\n  attr: 'scene.dragmode',\n  val: 'zoom',\n  icon: Icons.zoombox,\n  click: handleDrag3d\n};\nmodeBarButtons.pan3d = {\n  name: 'pan3d',\n  title: function (gd) {\n    return _(gd, 'Pan');\n  },\n  attr: 'scene.dragmode',\n  val: 'pan',\n  icon: Icons.pan,\n  click: handleDrag3d\n};\nmodeBarButtons.orbitRotation = {\n  name: 'orbitRotation',\n  title: function (gd) {\n    return _(gd, 'Orbital rotation');\n  },\n  attr: 'scene.dragmode',\n  val: 'orbit',\n  icon: Icons['3d_rotate'],\n  click: handleDrag3d\n};\nmodeBarButtons.tableRotation = {\n  name: 'tableRotation',\n  title: function (gd) {\n    return _(gd, 'Turntable rotation');\n  },\n  attr: 'scene.dragmode',\n  val: 'turntable',\n  icon: Icons['z-axis'],\n  click: handleDrag3d\n};\n\nfunction handleDrag3d(gd, ev) {\n  var button = ev.currentTarget;\n  var attr = button.getAttribute('data-attr');\n  var val = button.getAttribute('data-val') || true;\n  var sceneIds = gd._fullLayout._subplots.gl3d;\n  var layoutUpdate = {};\n  var parts = attr.split('.');\n\n  for (var i = 0; i < sceneIds.length; i++) {\n    layoutUpdate[sceneIds[i] + '.' + parts[1]] = val;\n  } // for multi-type subplots\n\n\n  var val2d = val === 'pan' ? val : 'zoom';\n  layoutUpdate.dragmode = val2d;\n  Registry.call('_guiRelayout', gd, layoutUpdate);\n}\n\nmodeBarButtons.resetCameraDefault3d = {\n  name: 'resetCameraDefault3d',\n  title: function (gd) {\n    return _(gd, 'Reset camera to default');\n  },\n  attr: 'resetDefault',\n  icon: Icons.home,\n  click: handleCamera3d\n};\nmodeBarButtons.resetCameraLastSave3d = {\n  name: 'resetCameraLastSave3d',\n  title: function (gd) {\n    return _(gd, 'Reset camera to last save');\n  },\n  attr: 'resetLastSave',\n  icon: Icons.movie,\n  click: handleCamera3d\n};\n\nfunction handleCamera3d(gd, ev) {\n  var button = ev.currentTarget;\n  var attr = button.getAttribute('data-attr');\n  var fullLayout = gd._fullLayout;\n  var sceneIds = fullLayout._subplots.gl3d || [];\n  var aobj = {};\n\n  for (var i = 0; i < sceneIds.length; i++) {\n    var sceneId = sceneIds[i];\n    var camera = sceneId + '.camera';\n    var aspectratio = sceneId + '.aspectratio';\n    var scene = fullLayout[sceneId]._scene;\n    var didUpdate;\n\n    if (attr === 'resetLastSave') {\n      aobj[camera + '.up'] = scene.viewInitial.up;\n      aobj[camera + '.eye'] = scene.viewInitial.eye;\n      aobj[camera + '.center'] = scene.viewInitial.center;\n      didUpdate = true;\n    } else if (attr === 'resetDefault') {\n      aobj[camera + '.up'] = null;\n      aobj[camera + '.eye'] = null;\n      aobj[camera + '.center'] = null;\n      didUpdate = true;\n    }\n\n    if (didUpdate) {\n      aobj[aspectratio + '.x'] = scene.viewInitial.aspectratio.x;\n      aobj[aspectratio + '.y'] = scene.viewInitial.aspectratio.y;\n      aobj[aspectratio + '.z'] = scene.viewInitial.aspectratio.z;\n    }\n  }\n\n  Registry.call('_guiRelayout', gd, aobj);\n}\n\nmodeBarButtons.hoverClosest3d = {\n  name: 'hoverClosest3d',\n  title: function (gd) {\n    return _(gd, 'Toggle show closest data on hover');\n  },\n  attr: 'hovermode',\n  val: null,\n  toggle: true,\n  icon: Icons.tooltip_basic,\n  gravity: 'ne',\n  click: handleHover3d\n};\n\nfunction getNextHover3d(gd, ev) {\n  var button = ev.currentTarget;\n  var val = button._previousVal;\n  var fullLayout = gd._fullLayout;\n  var sceneIds = fullLayout._subplots.gl3d || [];\n  var axes = ['xaxis', 'yaxis', 'zaxis']; // initialize 'current spike' object to be stored in the DOM\n\n  var currentSpikes = {};\n  var layoutUpdate = {};\n\n  if (val) {\n    layoutUpdate = val;\n    button._previousVal = null;\n  } else {\n    for (var i = 0; i < sceneIds.length; i++) {\n      var sceneId = sceneIds[i];\n      var sceneLayout = fullLayout[sceneId];\n      var hovermodeAStr = sceneId + '.hovermode';\n      currentSpikes[hovermodeAStr] = sceneLayout.hovermode;\n      layoutUpdate[hovermodeAStr] = false; // copy all the current spike attrs\n\n      for (var j = 0; j < 3; j++) {\n        var axis = axes[j];\n        var spikeAStr = sceneId + '.' + axis + '.showspikes';\n        layoutUpdate[spikeAStr] = false;\n        currentSpikes[spikeAStr] = sceneLayout[axis].showspikes;\n      }\n    }\n\n    button._previousVal = currentSpikes;\n  }\n\n  return layoutUpdate;\n}\n\nfunction handleHover3d(gd, ev) {\n  var layoutUpdate = getNextHover3d(gd, ev);\n  Registry.call('_guiRelayout', gd, layoutUpdate);\n}\n\nmodeBarButtons.zoomInGeo = {\n  name: 'zoomInGeo',\n  title: function (gd) {\n    return _(gd, 'Zoom in');\n  },\n  attr: 'zoom',\n  val: 'in',\n  icon: Icons.zoom_plus,\n  click: handleGeo\n};\nmodeBarButtons.zoomOutGeo = {\n  name: 'zoomOutGeo',\n  title: function (gd) {\n    return _(gd, 'Zoom out');\n  },\n  attr: 'zoom',\n  val: 'out',\n  icon: Icons.zoom_minus,\n  click: handleGeo\n};\nmodeBarButtons.resetGeo = {\n  name: 'resetGeo',\n  title: function (gd) {\n    return _(gd, 'Reset');\n  },\n  attr: 'reset',\n  val: null,\n  icon: Icons.autoscale,\n  click: handleGeo\n};\nmodeBarButtons.hoverClosestGeo = {\n  name: 'hoverClosestGeo',\n  title: function (gd) {\n    return _(gd, 'Toggle show closest data on hover');\n  },\n  attr: 'hovermode',\n  val: null,\n  toggle: true,\n  icon: Icons.tooltip_basic,\n  gravity: 'ne',\n  click: toggleHover\n};\n\nfunction handleGeo(gd, ev) {\n  var button = ev.currentTarget;\n  var attr = button.getAttribute('data-attr');\n  var val = button.getAttribute('data-val') || true;\n  var fullLayout = gd._fullLayout;\n  var geoIds = fullLayout._subplots.geo;\n\n  for (var i = 0; i < geoIds.length; i++) {\n    var id = geoIds[i];\n    var geoLayout = fullLayout[id];\n\n    if (attr === 'zoom') {\n      var scale = geoLayout.projection.scale;\n      var newScale = val === 'in' ? 2 * scale : 0.5 * scale;\n      Registry.call('_guiRelayout', gd, id + '.projection.scale', newScale);\n    } else if (attr === 'reset') {\n      resetView(gd, 'geo');\n    }\n  }\n}\n\nmodeBarButtons.hoverClosestGl2d = {\n  name: 'hoverClosestGl2d',\n  title: function (gd) {\n    return _(gd, 'Toggle show closest data on hover');\n  },\n  attr: 'hovermode',\n  val: null,\n  toggle: true,\n  icon: Icons.tooltip_basic,\n  gravity: 'ne',\n  click: toggleHover\n};\nmodeBarButtons.hoverClosestPie = {\n  name: 'hoverClosestPie',\n  title: function (gd) {\n    return _(gd, 'Toggle show closest data on hover');\n  },\n  attr: 'hovermode',\n  val: 'closest',\n  icon: Icons.tooltip_basic,\n  gravity: 'ne',\n  click: toggleHover\n};\n\nfunction getNextHover(gd) {\n  var fullLayout = gd._fullLayout;\n  if (fullLayout.hovermode) return false;\n\n  if (fullLayout._has('cartesian')) {\n    return fullLayout._isHoriz ? 'y' : 'x';\n  }\n\n  return 'closest';\n}\n\nfunction toggleHover(gd) {\n  var newHover = getNextHover(gd);\n  Registry.call('_guiRelayout', gd, 'hovermode', newHover);\n}\n\nmodeBarButtons.resetViewSankey = {\n  name: 'resetSankeyGroup',\n  title: function (gd) {\n    return _(gd, 'Reset view');\n  },\n  icon: Icons.home,\n  click: function (gd) {\n    var aObj = {\n      'node.groups': [],\n      'node.x': [],\n      'node.y': []\n    };\n\n    for (var i = 0; i < gd._fullData.length; i++) {\n      var viewInitial = gd._fullData[i]._viewInitial;\n      aObj['node.groups'].push(viewInitial.node.groups.slice());\n      aObj['node.x'].push(viewInitial.node.x.slice());\n      aObj['node.y'].push(viewInitial.node.y.slice());\n    }\n\n    Registry.call('restyle', gd, aObj);\n  }\n}; // buttons when more then one plot types are present\n\nmodeBarButtons.toggleHover = {\n  name: 'toggleHover',\n  title: function (gd) {\n    return _(gd, 'Toggle show closest data on hover');\n  },\n  attr: 'hovermode',\n  val: null,\n  toggle: true,\n  icon: Icons.tooltip_basic,\n  gravity: 'ne',\n  click: function (gd, ev) {\n    var layoutUpdate = getNextHover3d(gd, ev);\n    layoutUpdate.hovermode = getNextHover(gd);\n    Registry.call('_guiRelayout', gd, layoutUpdate);\n  }\n};\nmodeBarButtons.resetViews = {\n  name: 'resetViews',\n  title: function (gd) {\n    return _(gd, 'Reset views');\n  },\n  icon: Icons.home,\n  click: function (gd, ev) {\n    var button = ev.currentTarget;\n    button.setAttribute('data-attr', 'zoom');\n    button.setAttribute('data-val', 'reset');\n    handleCartesian(gd, ev);\n    button.setAttribute('data-attr', 'resetLastSave');\n    handleCamera3d(gd, ev);\n    resetView(gd, 'geo');\n    resetView(gd, 'mapbox');\n  }\n};\nmodeBarButtons.toggleSpikelines = {\n  name: 'toggleSpikelines',\n  title: function (gd) {\n    return _(gd, 'Toggle Spike Lines');\n  },\n  icon: Icons.spikeline,\n  attr: '_cartesianSpikesEnabled',\n  val: 'on',\n  click: function (gd) {\n    var fullLayout = gd._fullLayout;\n    var allSpikesEnabled = fullLayout._cartesianSpikesEnabled;\n    fullLayout._cartesianSpikesEnabled = allSpikesEnabled === 'on' ? 'off' : 'on';\n    Registry.call('_guiRelayout', gd, setSpikelineVisibility(gd));\n  }\n};\n\nfunction setSpikelineVisibility(gd) {\n  var fullLayout = gd._fullLayout;\n  var areSpikesOn = fullLayout._cartesianSpikesEnabled === 'on';\n  var axList = axisIds.list(gd, null, true);\n  var aobj = {};\n\n  for (var i = 0; i < axList.length; i++) {\n    var ax = axList[i];\n    aobj[ax._name + '.showspikes'] = areSpikesOn ? true : ax._showSpikeInitial;\n  }\n\n  return aobj;\n}\n\nmodeBarButtons.resetViewMapbox = {\n  name: 'resetViewMapbox',\n  title: function (gd) {\n    return _(gd, 'Reset view');\n  },\n  attr: 'reset',\n  icon: Icons.home,\n  click: function (gd) {\n    resetView(gd, 'mapbox');\n  }\n};\n\nfunction resetView(gd, subplotType) {\n  var fullLayout = gd._fullLayout;\n  var subplotIds = fullLayout._subplots[subplotType] || [];\n  var aObj = {};\n\n  for (var i = 0; i < subplotIds.length; i++) {\n    var id = subplotIds[i];\n    var subplotObj = fullLayout[id]._subplot;\n    var viewInitial = subplotObj.viewInitial;\n    var viewKeys = Object.keys(viewInitial);\n\n    for (var j = 0; j < viewKeys.length; j++) {\n      var key = viewKeys[j];\n      aObj[id + '.' + key] = viewInitial[key];\n    }\n  }\n\n  Registry.call('_guiRelayout', gd, aObj);\n}","map":{"version":3,"sources":["/home/user/Desktop/milonux-sq-dashboard-59aefe7abad7/node_modules/plotly.js/src/components/modebar/buttons.js"],"names":["Registry","require","Plots","axisIds","Lib","Icons","_","modeBarButtons","module","exports","toImage","name","title","gd","opts","_context","toImageButtonOptions","format","icon","camera","click","notifier","isIE","forEach","key","call","then","filename","catch","sendDataToCloud","disk","editInChartStudio","pencil","zoom2d","attr","val","zoombox","handleCartesian","pan2d","pan","select2d","selectbox","lasso2d","lasso","zoomIn2d","zoom_plus","zoomOut2d","zoom_minus","autoScale2d","autoscale","resetScale2d","home","hoverClosestCartesian","tooltip_basic","gravity","hoverCompareCartesian","_fullLayout","_isHoriz","tooltip_compare","ev","button","currentTarget","astr","getAttribute","fullLayout","aobj","axList","list","allSpikesEnabled","_cartesianSpikesEnabled","ax","i","mag","r0","r1","axName","length","fixedrange","_name","_rangeInitial","undefined","rangeInitial","slice","_showSpikeInitial","rangeNow","r2l","range","rangeNew","l2r","setAttribute","zoom3d","handleDrag3d","pan3d","orbitRotation","tableRotation","sceneIds","_subplots","gl3d","layoutUpdate","parts","split","val2d","dragmode","resetCameraDefault3d","handleCamera3d","resetCameraLastSave3d","movie","sceneId","aspectratio","scene","_scene","didUpdate","viewInitial","up","eye","center","x","y","z","hoverClosest3d","toggle","handleHover3d","getNextHover3d","_previousVal","axes","currentSpikes","sceneLayout","hovermodeAStr","hovermode","j","axis","spikeAStr","showspikes","zoomInGeo","handleGeo","zoomOutGeo","resetGeo","hoverClosestGeo","toggleHover","geoIds","geo","id","geoLayout","scale","projection","newScale","resetView","hoverClosestGl2d","hoverClosestPie","getNextHover","_has","newHover","resetViewSankey","aObj","_fullData","_viewInitial","push","node","groups","resetViews","toggleSpikelines","spikeline","setSpikelineVisibility","areSpikesOn","resetViewMapbox","subplotType","subplotIds","subplotObj","_subplot","viewKeys","Object","keys"],"mappings":"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","sourcesContent":["/**\n* Copyright 2012-2019, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n\n'use strict';\n\nvar Registry = require('../../registry');\nvar Plots = require('../../plots/plots');\nvar axisIds = require('../../plots/cartesian/axis_ids');\nvar Lib = require('../../lib');\nvar Icons = require('../../fonts/ploticon');\n\nvar _ = Lib._;\n\nvar modeBarButtons = module.exports = {};\n\n/**\n * ModeBar buttons configuration\n *\n * @param {string} name\n *      name / id of the buttons (for tracking)\n * @param {string} title\n *      text that appears while hovering over the button,\n *      enter null, false or '' for no hover text\n * @param {string} icon\n *      svg icon object associated with the button\n *      can be linked to Plotly.Icons to use the default plotly icons\n * @param {string} [gravity]\n *      icon positioning\n * @param {function} click\n *      click handler associated with the button, a function of\n *      'gd' (the main graph object) and\n *      'ev' (the event object)\n * @param {string} [attr]\n *      attribute associated with button,\n *      use this with 'val' to keep track of the state\n * @param {*} [val]\n *      initial 'attr' value, can be a function of gd\n * @param {boolean} [toggle]\n *      is the button a toggle button?\n */\nmodeBarButtons.toImage = {\n    name: 'toImage',\n    title: function(gd) {\n        var opts = gd._context.toImageButtonOptions || {};\n        var format = opts.format || 'png';\n        return format === 'png' ?\n            _(gd, 'Download plot as a png') : // legacy text\n            _(gd, 'Download plot'); // generic non-PNG text\n    },\n    icon: Icons.camera,\n    click: function(gd) {\n        var toImageButtonOptions = gd._context.toImageButtonOptions;\n        var opts = {format: toImageButtonOptions.format || 'png'};\n\n        Lib.notifier(_(gd, 'Taking snapshot - this may take a few seconds'), 'long');\n\n        if(opts.format !== 'svg' && Lib.isIE()) {\n            Lib.notifier(_(gd, 'IE only supports svg.  Changing format to svg.'), 'long');\n            opts.format = 'svg';\n        }\n\n        ['filename', 'width', 'height', 'scale'].forEach(function(key) {\n            if(key in toImageButtonOptions) {\n                opts[key] = toImageButtonOptions[key];\n            }\n        });\n\n        Registry.call('downloadImage', gd, opts)\n          .then(function(filename) {\n              Lib.notifier(_(gd, 'Snapshot succeeded') + ' - ' + filename, 'long');\n          })\n          .catch(function() {\n              Lib.notifier(_(gd, 'Sorry, there was a problem downloading your snapshot!'), 'long');\n          });\n    }\n};\n\nmodeBarButtons.sendDataToCloud = {\n    name: 'sendDataToCloud',\n    title: function(gd) { return _(gd, 'Edit in Chart Studio'); },\n    icon: Icons.disk,\n    click: function(gd) {\n        Plots.sendDataToCloud(gd);\n    }\n};\n\nmodeBarButtons.editInChartStudio = {\n    name: 'editInChartStudio',\n    title: function(gd) { return _(gd, 'Edit in Chart Studio'); },\n    icon: Icons.pencil,\n    click: function(gd) {\n        Plots.sendDataToCloud(gd);\n    }\n};\n\nmodeBarButtons.zoom2d = {\n    name: 'zoom2d',\n    title: function(gd) { return _(gd, 'Zoom'); },\n    attr: 'dragmode',\n    val: 'zoom',\n    icon: Icons.zoombox,\n    click: handleCartesian\n};\n\nmodeBarButtons.pan2d = {\n    name: 'pan2d',\n    title: function(gd) { return _(gd, 'Pan'); },\n    attr: 'dragmode',\n    val: 'pan',\n    icon: Icons.pan,\n    click: handleCartesian\n};\n\nmodeBarButtons.select2d = {\n    name: 'select2d',\n    title: function(gd) { return _(gd, 'Box Select'); },\n    attr: 'dragmode',\n    val: 'select',\n    icon: Icons.selectbox,\n    click: handleCartesian\n};\n\nmodeBarButtons.lasso2d = {\n    name: 'lasso2d',\n    title: function(gd) { return _(gd, 'Lasso Select'); },\n    attr: 'dragmode',\n    val: 'lasso',\n    icon: Icons.lasso,\n    click: handleCartesian\n};\n\nmodeBarButtons.zoomIn2d = {\n    name: 'zoomIn2d',\n    title: function(gd) { return _(gd, 'Zoom in'); },\n    attr: 'zoom',\n    val: 'in',\n    icon: Icons.zoom_plus,\n    click: handleCartesian\n};\n\nmodeBarButtons.zoomOut2d = {\n    name: 'zoomOut2d',\n    title: function(gd) { return _(gd, 'Zoom out'); },\n    attr: 'zoom',\n    val: 'out',\n    icon: Icons.zoom_minus,\n    click: handleCartesian\n};\n\nmodeBarButtons.autoScale2d = {\n    name: 'autoScale2d',\n    title: function(gd) { return _(gd, 'Autoscale'); },\n    attr: 'zoom',\n    val: 'auto',\n    icon: Icons.autoscale,\n    click: handleCartesian\n};\n\nmodeBarButtons.resetScale2d = {\n    name: 'resetScale2d',\n    title: function(gd) { return _(gd, 'Reset axes'); },\n    attr: 'zoom',\n    val: 'reset',\n    icon: Icons.home,\n    click: handleCartesian\n};\n\nmodeBarButtons.hoverClosestCartesian = {\n    name: 'hoverClosestCartesian',\n    title: function(gd) { return _(gd, 'Show closest data on hover'); },\n    attr: 'hovermode',\n    val: 'closest',\n    icon: Icons.tooltip_basic,\n    gravity: 'ne',\n    click: handleCartesian\n};\n\nmodeBarButtons.hoverCompareCartesian = {\n    name: 'hoverCompareCartesian',\n    title: function(gd) { return _(gd, 'Compare data on hover'); },\n    attr: 'hovermode',\n    val: function(gd) {\n        return gd._fullLayout._isHoriz ? 'y' : 'x';\n    },\n    icon: Icons.tooltip_compare,\n    gravity: 'ne',\n    click: handleCartesian\n};\n\nfunction handleCartesian(gd, ev) {\n    var button = ev.currentTarget;\n    var astr = button.getAttribute('data-attr');\n    var val = button.getAttribute('data-val') || true;\n    var fullLayout = gd._fullLayout;\n    var aobj = {};\n    var axList = axisIds.list(gd, null, true);\n    var allSpikesEnabled = fullLayout._cartesianSpikesEnabled;\n\n    var ax, i;\n\n    if(astr === 'zoom') {\n        var mag = (val === 'in') ? 0.5 : 2;\n        var r0 = (1 + mag) / 2;\n        var r1 = (1 - mag) / 2;\n        var axName;\n\n        for(i = 0; i < axList.length; i++) {\n            ax = axList[i];\n\n            if(!ax.fixedrange) {\n                axName = ax._name;\n                if(val === 'auto') {\n                    aobj[axName + '.autorange'] = true;\n                } else if(val === 'reset') {\n                    if(ax._rangeInitial === undefined) {\n                        aobj[axName + '.autorange'] = true;\n                    } else {\n                        var rangeInitial = ax._rangeInitial.slice();\n                        aobj[axName + '.range[0]'] = rangeInitial[0];\n                        aobj[axName + '.range[1]'] = rangeInitial[1];\n                    }\n\n                    // N.B. \"reset\" also resets showspikes\n                    if(ax._showSpikeInitial !== undefined) {\n                        aobj[axName + '.showspikes'] = ax._showSpikeInitial;\n                        if(allSpikesEnabled === 'on' && !ax._showSpikeInitial) {\n                            allSpikesEnabled = 'off';\n                        }\n                    }\n                } else {\n                    var rangeNow = [\n                        ax.r2l(ax.range[0]),\n                        ax.r2l(ax.range[1]),\n                    ];\n\n                    var rangeNew = [\n                        r0 * rangeNow[0] + r1 * rangeNow[1],\n                        r0 * rangeNow[1] + r1 * rangeNow[0]\n                    ];\n\n                    aobj[axName + '.range[0]'] = ax.l2r(rangeNew[0]);\n                    aobj[axName + '.range[1]'] = ax.l2r(rangeNew[1]);\n                }\n            }\n        }\n    } else {\n        // if ALL traces have orientation 'h', 'hovermode': 'x' otherwise: 'y'\n        if(astr === 'hovermode' && (val === 'x' || val === 'y')) {\n            val = fullLayout._isHoriz ? 'y' : 'x';\n            button.setAttribute('data-val', val);\n        }\n\n        aobj[astr] = val;\n    }\n\n    fullLayout._cartesianSpikesEnabled = allSpikesEnabled;\n\n    Registry.call('_guiRelayout', gd, aobj);\n}\n\nmodeBarButtons.zoom3d = {\n    name: 'zoom3d',\n    title: function(gd) { return _(gd, 'Zoom'); },\n    attr: 'scene.dragmode',\n    val: 'zoom',\n    icon: Icons.zoombox,\n    click: handleDrag3d\n};\n\nmodeBarButtons.pan3d = {\n    name: 'pan3d',\n    title: function(gd) { return _(gd, 'Pan'); },\n    attr: 'scene.dragmode',\n    val: 'pan',\n    icon: Icons.pan,\n    click: handleDrag3d\n};\n\nmodeBarButtons.orbitRotation = {\n    name: 'orbitRotation',\n    title: function(gd) { return _(gd, 'Orbital rotation'); },\n    attr: 'scene.dragmode',\n    val: 'orbit',\n    icon: Icons['3d_rotate'],\n    click: handleDrag3d\n};\n\nmodeBarButtons.tableRotation = {\n    name: 'tableRotation',\n    title: function(gd) { return _(gd, 'Turntable rotation'); },\n    attr: 'scene.dragmode',\n    val: 'turntable',\n    icon: Icons['z-axis'],\n    click: handleDrag3d\n};\n\nfunction handleDrag3d(gd, ev) {\n    var button = ev.currentTarget;\n    var attr = button.getAttribute('data-attr');\n    var val = button.getAttribute('data-val') || true;\n    var sceneIds = gd._fullLayout._subplots.gl3d;\n    var layoutUpdate = {};\n\n    var parts = attr.split('.');\n\n    for(var i = 0; i < sceneIds.length; i++) {\n        layoutUpdate[sceneIds[i] + '.' + parts[1]] = val;\n    }\n\n    // for multi-type subplots\n    var val2d = (val === 'pan') ? val : 'zoom';\n    layoutUpdate.dragmode = val2d;\n\n    Registry.call('_guiRelayout', gd, layoutUpdate);\n}\n\nmodeBarButtons.resetCameraDefault3d = {\n    name: 'resetCameraDefault3d',\n    title: function(gd) { return _(gd, 'Reset camera to default'); },\n    attr: 'resetDefault',\n    icon: Icons.home,\n    click: handleCamera3d\n};\n\nmodeBarButtons.resetCameraLastSave3d = {\n    name: 'resetCameraLastSave3d',\n    title: function(gd) { return _(gd, 'Reset camera to last save'); },\n    attr: 'resetLastSave',\n    icon: Icons.movie,\n    click: handleCamera3d\n};\n\nfunction handleCamera3d(gd, ev) {\n    var button = ev.currentTarget;\n    var attr = button.getAttribute('data-attr');\n    var fullLayout = gd._fullLayout;\n    var sceneIds = fullLayout._subplots.gl3d || [];\n    var aobj = {};\n\n    for(var i = 0; i < sceneIds.length; i++) {\n        var sceneId = sceneIds[i];\n        var camera = sceneId + '.camera';\n        var aspectratio = sceneId + '.aspectratio';\n        var scene = fullLayout[sceneId]._scene;\n        var didUpdate;\n\n        if(attr === 'resetLastSave') {\n            aobj[camera + '.up'] = scene.viewInitial.up;\n            aobj[camera + '.eye'] = scene.viewInitial.eye;\n            aobj[camera + '.center'] = scene.viewInitial.center;\n            didUpdate = true;\n        } else if(attr === 'resetDefault') {\n            aobj[camera + '.up'] = null;\n            aobj[camera + '.eye'] = null;\n            aobj[camera + '.center'] = null;\n            didUpdate = true;\n        }\n\n        if(didUpdate) {\n            aobj[aspectratio + '.x'] = scene.viewInitial.aspectratio.x;\n            aobj[aspectratio + '.y'] = scene.viewInitial.aspectratio.y;\n            aobj[aspectratio + '.z'] = scene.viewInitial.aspectratio.z;\n        }\n    }\n\n    Registry.call('_guiRelayout', gd, aobj);\n}\n\nmodeBarButtons.hoverClosest3d = {\n    name: 'hoverClosest3d',\n    title: function(gd) { return _(gd, 'Toggle show closest data on hover'); },\n    attr: 'hovermode',\n    val: null,\n    toggle: true,\n    icon: Icons.tooltip_basic,\n    gravity: 'ne',\n    click: handleHover3d\n};\n\nfunction getNextHover3d(gd, ev) {\n    var button = ev.currentTarget;\n    var val = button._previousVal;\n    var fullLayout = gd._fullLayout;\n    var sceneIds = fullLayout._subplots.gl3d || [];\n\n    var axes = ['xaxis', 'yaxis', 'zaxis'];\n\n    // initialize 'current spike' object to be stored in the DOM\n    var currentSpikes = {};\n    var layoutUpdate = {};\n\n    if(val) {\n        layoutUpdate = val;\n        button._previousVal = null;\n    } else {\n        for(var i = 0; i < sceneIds.length; i++) {\n            var sceneId = sceneIds[i];\n            var sceneLayout = fullLayout[sceneId];\n\n            var hovermodeAStr = sceneId + '.hovermode';\n            currentSpikes[hovermodeAStr] = sceneLayout.hovermode;\n            layoutUpdate[hovermodeAStr] = false;\n\n            // copy all the current spike attrs\n            for(var j = 0; j < 3; j++) {\n                var axis = axes[j];\n                var spikeAStr = sceneId + '.' + axis + '.showspikes';\n                layoutUpdate[spikeAStr] = false;\n                currentSpikes[spikeAStr] = sceneLayout[axis].showspikes;\n            }\n        }\n\n        button._previousVal = currentSpikes;\n    }\n    return layoutUpdate;\n}\n\nfunction handleHover3d(gd, ev) {\n    var layoutUpdate = getNextHover3d(gd, ev);\n    Registry.call('_guiRelayout', gd, layoutUpdate);\n}\n\nmodeBarButtons.zoomInGeo = {\n    name: 'zoomInGeo',\n    title: function(gd) { return _(gd, 'Zoom in'); },\n    attr: 'zoom',\n    val: 'in',\n    icon: Icons.zoom_plus,\n    click: handleGeo\n};\n\nmodeBarButtons.zoomOutGeo = {\n    name: 'zoomOutGeo',\n    title: function(gd) { return _(gd, 'Zoom out'); },\n    attr: 'zoom',\n    val: 'out',\n    icon: Icons.zoom_minus,\n    click: handleGeo\n};\n\nmodeBarButtons.resetGeo = {\n    name: 'resetGeo',\n    title: function(gd) { return _(gd, 'Reset'); },\n    attr: 'reset',\n    val: null,\n    icon: Icons.autoscale,\n    click: handleGeo\n};\n\nmodeBarButtons.hoverClosestGeo = {\n    name: 'hoverClosestGeo',\n    title: function(gd) { return _(gd, 'Toggle show closest data on hover'); },\n    attr: 'hovermode',\n    val: null,\n    toggle: true,\n    icon: Icons.tooltip_basic,\n    gravity: 'ne',\n    click: toggleHover\n};\n\nfunction handleGeo(gd, ev) {\n    var button = ev.currentTarget;\n    var attr = button.getAttribute('data-attr');\n    var val = button.getAttribute('data-val') || true;\n    var fullLayout = gd._fullLayout;\n    var geoIds = fullLayout._subplots.geo;\n\n    for(var i = 0; i < geoIds.length; i++) {\n        var id = geoIds[i];\n        var geoLayout = fullLayout[id];\n\n        if(attr === 'zoom') {\n            var scale = geoLayout.projection.scale;\n            var newScale = (val === 'in') ? 2 * scale : 0.5 * scale;\n\n            Registry.call('_guiRelayout', gd, id + '.projection.scale', newScale);\n        } else if(attr === 'reset') {\n            resetView(gd, 'geo');\n        }\n    }\n}\n\nmodeBarButtons.hoverClosestGl2d = {\n    name: 'hoverClosestGl2d',\n    title: function(gd) { return _(gd, 'Toggle show closest data on hover'); },\n    attr: 'hovermode',\n    val: null,\n    toggle: true,\n    icon: Icons.tooltip_basic,\n    gravity: 'ne',\n    click: toggleHover\n};\n\nmodeBarButtons.hoverClosestPie = {\n    name: 'hoverClosestPie',\n    title: function(gd) { return _(gd, 'Toggle show closest data on hover'); },\n    attr: 'hovermode',\n    val: 'closest',\n    icon: Icons.tooltip_basic,\n    gravity: 'ne',\n    click: toggleHover\n};\n\nfunction getNextHover(gd) {\n    var fullLayout = gd._fullLayout;\n\n    if(fullLayout.hovermode) return false;\n\n    if(fullLayout._has('cartesian')) {\n        return fullLayout._isHoriz ? 'y' : 'x';\n    }\n    return 'closest';\n}\n\nfunction toggleHover(gd) {\n    var newHover = getNextHover(gd);\n    Registry.call('_guiRelayout', gd, 'hovermode', newHover);\n}\n\nmodeBarButtons.resetViewSankey = {\n    name: 'resetSankeyGroup',\n    title: function(gd) { return _(gd, 'Reset view'); },\n    icon: Icons.home,\n    click: function(gd) {\n        var aObj = {\n            'node.groups': [],\n            'node.x': [],\n            'node.y': []\n        };\n        for(var i = 0; i < gd._fullData.length; i++) {\n            var viewInitial = gd._fullData[i]._viewInitial;\n            aObj['node.groups'].push(viewInitial.node.groups.slice());\n            aObj['node.x'].push(viewInitial.node.x.slice());\n            aObj['node.y'].push(viewInitial.node.y.slice());\n        }\n        Registry.call('restyle', gd, aObj);\n    }\n};\n\n// buttons when more then one plot types are present\n\nmodeBarButtons.toggleHover = {\n    name: 'toggleHover',\n    title: function(gd) { return _(gd, 'Toggle show closest data on hover'); },\n    attr: 'hovermode',\n    val: null,\n    toggle: true,\n    icon: Icons.tooltip_basic,\n    gravity: 'ne',\n    click: function(gd, ev) {\n        var layoutUpdate = getNextHover3d(gd, ev);\n        layoutUpdate.hovermode = getNextHover(gd);\n\n        Registry.call('_guiRelayout', gd, layoutUpdate);\n    }\n};\n\nmodeBarButtons.resetViews = {\n    name: 'resetViews',\n    title: function(gd) { return _(gd, 'Reset views'); },\n    icon: Icons.home,\n    click: function(gd, ev) {\n        var button = ev.currentTarget;\n\n        button.setAttribute('data-attr', 'zoom');\n        button.setAttribute('data-val', 'reset');\n        handleCartesian(gd, ev);\n\n        button.setAttribute('data-attr', 'resetLastSave');\n        handleCamera3d(gd, ev);\n\n        resetView(gd, 'geo');\n        resetView(gd, 'mapbox');\n    }\n};\n\nmodeBarButtons.toggleSpikelines = {\n    name: 'toggleSpikelines',\n    title: function(gd) { return _(gd, 'Toggle Spike Lines'); },\n    icon: Icons.spikeline,\n    attr: '_cartesianSpikesEnabled',\n    val: 'on',\n    click: function(gd) {\n        var fullLayout = gd._fullLayout;\n        var allSpikesEnabled = fullLayout._cartesianSpikesEnabled;\n\n        fullLayout._cartesianSpikesEnabled = allSpikesEnabled === 'on' ? 'off' : 'on';\n        Registry.call('_guiRelayout', gd, setSpikelineVisibility(gd));\n    }\n};\n\nfunction setSpikelineVisibility(gd) {\n    var fullLayout = gd._fullLayout;\n    var areSpikesOn = fullLayout._cartesianSpikesEnabled === 'on';\n    var axList = axisIds.list(gd, null, true);\n    var aobj = {};\n\n    for(var i = 0; i < axList.length; i++) {\n        var ax = axList[i];\n        aobj[ax._name + '.showspikes'] = areSpikesOn ? true : ax._showSpikeInitial;\n    }\n\n    return aobj;\n}\n\nmodeBarButtons.resetViewMapbox = {\n    name: 'resetViewMapbox',\n    title: function(gd) { return _(gd, 'Reset view'); },\n    attr: 'reset',\n    icon: Icons.home,\n    click: function(gd) {\n        resetView(gd, 'mapbox');\n    }\n};\n\nfunction resetView(gd, subplotType) {\n    var fullLayout = gd._fullLayout;\n    var subplotIds = fullLayout._subplots[subplotType] || [];\n    var aObj = {};\n\n    for(var i = 0; i < subplotIds.length; i++) {\n        var id = subplotIds[i];\n        var subplotObj = fullLayout[id]._subplot;\n        var viewInitial = subplotObj.viewInitial;\n        var viewKeys = Object.keys(viewInitial);\n\n        for(var j = 0; j < viewKeys.length; j++) {\n            var key = viewKeys[j];\n            aObj[id + '.' + key] = viewInitial[key];\n        }\n    }\n\n    Registry.call('_guiRelayout', gd, aObj);\n}\n"]},"metadata":{},"sourceType":"script"}