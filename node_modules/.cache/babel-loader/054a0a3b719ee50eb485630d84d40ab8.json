{"ast":null,"code":"var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _class, _temp, _initialiseProps;\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n/**\r\n * Created by RaphaÃ«l Morineau on 28 Oct 2016.\r\n */\n\n\nimport React, { Component } from 'react';\nimport { object } from 'prop-types';\nimport InfiniteScroller from 'react-infinite';\nimport ListItem from 'material-ui/List/ListItem';\nimport Popover from 'material-ui/Popover/Popover';\nimport TextField from 'material-ui/TextField/TextField';\nimport SelectionsPresenter from './SelectionsPresenter';\nimport { getChildrenLength, areEqual } from './utils';\nimport { selectFieldTypes } from './types';\nimport { selectFieldDefaultProps } from './defaultProps';\nvar SelectField = (_temp = _class = function (_Component) {\n  _inherits(SelectField, _Component);\n\n  function SelectField(props, context) {\n    _classCallCheck(this, SelectField);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props, context));\n\n    _initialiseProps.call(_this);\n\n    var children = props.children,\n        value = props.value,\n        multiple = props.multiple,\n        showAutocompleteThreshold = props.showAutocompleteThreshold;\n    var itemsLength = getChildrenLength(children);\n    _this.state = {\n      isOpen: false,\n      isFocused: false,\n      initialValue: value || (multiple ? [] : null),\n      itemsLength: itemsLength,\n      isAutocompleteShown: _this.showAutocomplete(showAutocompleteThreshold, itemsLength),\n      selectedItems: value || (multiple ? [] : null),\n      searchText: ''\n    };\n    _this.menuItems = [];\n    return _this;\n  } // eslint-disable-next-line camelcase\n\n\n  SelectField.prototype.UNSAFE_componentWillReceiveProps = function UNSAFE_componentWillReceiveProps(nextProps) {\n    if (!areEqual(nextProps.value, this.state.selectedItems)) {\n      this.setState({\n        selectedItems: nextProps.value\n      });\n    }\n\n    if (!areEqual(nextProps.children, this.props.children)) {\n      var itemsLength = getChildrenLength(nextProps.children);\n      this.setState({\n        itemsLength: itemsLength,\n        isAutocompleteShown: this.showAutocomplete(this.props.showAutocompleteThreshold, itemsLength)\n      });\n    }\n  };\n\n  SelectField.prototype.showAutocomplete = function showAutocomplete() {\n    var threshold = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var itemsLength = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    if (typeof threshold === 'number') return itemsLength >= threshold;\n\n    switch (threshold) {\n      case 'always':\n        return true;\n\n      case 'never':\n      default:\n        return false;\n    }\n  };\n\n  SelectField.prototype.componentDidMount = function componentDidMount() {\n    // Potential problem with Popover ?\n    // https://github.com/callemall/material-ui/blob/master/src/DropDownMenu/DropDownMenu.js#L237\n    if (this.props.openImmediately) this.openMenu();\n  };\n\n  SelectField.prototype.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {};\n\n  SelectField.prototype.openMenu = function openMenu() {\n    var _this2 = this;\n\n    if (!this.state.isOpen) this.props.onMenuOpen();\n\n    if (this.state.itemsLength || this.props.showAutocompleteThreshold === 'always') {\n      this.setState({\n        isOpen: true\n      }, function () {\n        return _this2.focusTextField();\n      });\n    }\n  }; // FIXME: both focusTextField and focusMenuItem don't really focus the targeted element, user must hit another key to trigger the actual focus... need to find a solution for a true direct focus\n\n\n  SelectField.prototype.focusMenuItem = function focusMenuItem(index) {\n    var targetMenuItem = this.menuItems.find(function (item) {\n      return !!item && (index ? item.props.tabIndex === index : true);\n    });\n    if (targetMenuItem) targetMenuItem.applyFocusState('keyboard-focused');\n  };\n\n  SelectField.prototype.focusTextField = function focusTextField() {\n    this.state.isAutocompleteShown && this.searchTextField ? this.searchTextField.focus() : this.focusMenuItem();\n  };\n\n  SelectField.prototype.clearTextField = function clearTextField(callback) {\n    this.props.keepSearchOnSelect ? typeof callback === 'function' && callback() // don't reset the autocomplete\n    : this.setState({\n      searchText: ''\n    }, callback);\n  };\n  /**\r\n   * Main Component Wrapper methods\r\n   */\n  // toggle instead of close ? (in case user changes targetOrigin/anchorOrigin)\n\n  /**\r\n   * TextField autocomplete methods\r\n   */\n\n  /**\r\n   * Menu Header methods\r\n   */\n\n  /**\r\n   * Menu methods\r\n   */\n  // group must be of type 'optgroup'\n  // TODO: add Shift+Tab\n\n  /**\r\n   * this.menuItems can contain uncontinuous React elements, because of filtering\r\n   */\n\n\n  SelectField.prototype.render = function render() {\n    var _this3 = this;\n\n    var _props = this.props,\n        anchorOrigin = _props.anchorOrigin,\n        autocompleteFilter = _props.autocompleteFilter,\n        autocompleteStyle = _props.autocompleteStyle,\n        autocompleteUnderlineFocusStyle = _props.autocompleteUnderlineFocusStyle,\n        autocompleteUnderlineStyle = _props.autocompleteUnderlineStyle,\n        canAutoPosition = _props.canAutoPosition,\n        checkPosition = _props.checkPosition,\n        checkedIcon = _props.checkedIcon,\n        children = _props.children,\n        disabled = _props.disabled,\n        dropDownIcon = _props.dropDownIcon,\n        elementHeight = _props.elementHeight,\n        errorStyle = _props.errorStyle,\n        errorText = _props.errorText,\n        floatingLabel = _props.floatingLabel,\n        floatingLabelFocusStyle = _props.floatingLabelFocusStyle,\n        floatingLabelStyle = _props.floatingLabelStyle,\n        hintText = _props.hintText,\n        hintTextAutocomplete = _props.hintTextAutocomplete,\n        hoverColor = _props.hoverColor,\n        infiniteLoadBeginEdgeOffset = _props.infiniteLoadBeginEdgeOffset,\n        innerDivStyle = _props.innerDivStyle,\n        menuCloseButton = _props.menuCloseButton,\n        menuFooterStyle = _props.menuFooterStyle,\n        menuGroupStyle = _props.menuGroupStyle,\n        menuStyle = _props.menuStyle,\n        multiple = _props.multiple,\n        nb2show = _props.nb2show,\n        noMatchFound = _props.noMatchFound,\n        noMatchFoundStyle = _props.noMatchFoundStyle,\n        popoverClassName = _props.popoverClassName,\n        popoverWidth = _props.popoverWidth,\n        onInfiniteLoad = _props.onInfiniteLoad,\n        resetButton = _props.resetButton,\n        selectAllButton = _props.selectAllButton,\n        selectedMenuItemStyle = _props.selectedMenuItemStyle,\n        selectionsRenderer = _props.selectionsRenderer,\n        style = _props.style,\n        unCheckedIcon = _props.unCheckedIcon,\n        underlineErrorStyle = _props.underlineErrorStyle,\n        underlineFocusStyle = _props.underlineFocusStyle,\n        underlineStyle = _props.underlineStyle,\n        withResetSelectAllButtons = _props.withResetSelectAllButtons; // Default style depending on Material-UI context (muiTheme)\n\n    var _context$muiTheme = this.context.muiTheme,\n        palette = _context$muiTheme.baseTheme.palette,\n        menuItem = _context$muiTheme.menuItem;\n\n    var mergedSelectedMenuItemStyle = _extends({\n      color: menuItem.selectedTextColor\n    }, selectedMenuItemStyle);\n\n    if (checkedIcon) {\n      checkedIcon.props.style.fill = mergedSelectedMenuItemStyle.color;\n    }\n\n    var mergedHoverColor = hoverColor || menuItem.hoverColor;\n    /**\r\n     * MenuItems building, based on user's children\r\n     * 1st function is the base process for producing a MenuItem,\r\n     * including filtering from the Autocomplete.\r\n     * 2nd function is the main loop over children array,\r\n     * accounting for optgroups.\r\n     */\n\n    var menuItemBuilder = function menuItemBuilder(nodes, child, index) {\n      var selectedItems = _this3.state.selectedItems;\n      var _child$props = child.props,\n          childValue = _child$props.value,\n          label = _child$props.label;\n\n      if (!autocompleteFilter(_this3.state.searchText, label || childValue)) {\n        return nodes;\n      }\n\n      var isSelected = Array.isArray(selectedItems) ? selectedItems.some(function (obj) {\n        return areEqual(obj.value, childValue);\n      }) : selectedItems ? selectedItems.value === childValue : false;\n      var leftCheckbox = multiple && checkPosition === 'left' && (isSelected ? checkedIcon : unCheckedIcon) || null;\n      var rightCheckbox = multiple && checkPosition === 'right' && (isSelected ? checkedIcon : unCheckedIcon) || null;\n\n      if (multiple && checkPosition !== '') {\n        if (checkedIcon) checkedIcon.props.style.marginTop = 0;\n        if (unCheckedIcon) unCheckedIcon.props.style.marginTop = 0;\n      }\n\n      return [].concat(nodes, [React.createElement(ListItem, {\n        key: ++index,\n        tabIndex: index,\n        ref: function ref(_ref) {\n          return _this3.menuItems[++index] = _ref;\n        },\n        disableFocusRipple: true,\n        hoverColor: mergedHoverColor,\n        innerDivStyle: _extends({\n          paddingTop: 10,\n          paddingBottom: 10,\n          paddingLeft: multiple && checkPosition === 'left' ? 56 : 16,\n          paddingRight: multiple && checkPosition === 'right' ? 56 : 16\n        }, innerDivStyle),\n        leftIcon: leftCheckbox,\n        onClick: _this3.handleMenuSelection({\n          value: childValue,\n          label: label\n        }),\n        primaryText: child,\n        rightIcon: rightCheckbox,\n        style: isSelected ? mergedSelectedMenuItemStyle : {}\n      })]);\n    };\n\n    var fixedChildren = Array.isArray(children) ? children : [children];\n    var menuItems = !disabled && fixedChildren.length && this.state.isOpen && fixedChildren.reduce(function (nodes, child, index) {\n      if (child.type !== 'optgroup') {\n        return menuItemBuilder(nodes, child, index);\n      }\n\n      var nextIndex = nodes.length ? +nodes[nodes.length - 1].key + 1 : 0;\n      var menuGroup = React.createElement(ListItem, {\n        disabled: true,\n        key: nextIndex,\n        primaryText: child.props.label,\n        style: _extends({\n          cursor: 'default',\n          paddingTop: 10,\n          paddingBottom: 10\n        }, menuGroupStyle)\n      });\n      var groupedItems = [];\n      var cpc = child.props.children;\n\n      if (cpc) {\n        if (Array.isArray(cpc) && cpc.length) {\n          groupedItems = cpc.reduce(function (nodes, child, idx) {\n            return menuItemBuilder(nodes, child, nextIndex + idx);\n          }, []);\n        } else if ((typeof cpc === 'undefined' ? 'undefined' : _typeof(cpc)) === 'object') {\n          groupedItems = menuItemBuilder(nodes, cpc, nextIndex);\n        }\n      }\n\n      return groupedItems.length ? [].concat(nodes, [menuGroup], groupedItems) : nodes;\n    }, []);\n    var autoCompleteHeight = this.state.isAutocompleteShown ? 53 : 0;\n    var headerHeight = multiple && withResetSelectAllButtons ? 36 : 0;\n    var footerHeight = multiple && menuCloseButton ? 36 : 0;\n    var noMatchFoundHeight = 36;\n    var optionsContainerHeight = (Array.isArray(elementHeight) ? elementHeight.reduce(function (totalHeight, height) {\n      return totalHeight + height;\n    }, 0) : elementHeight * (nb2show < menuItems.length ? nb2show : menuItems.length)) || 0;\n    var popoverHeight = autoCompleteHeight + headerHeight + (optionsContainerHeight || noMatchFoundHeight) + footerHeight + 6;\n    var scrollableStyle = {\n      overflowY: nb2show >= menuItems.length ? 'hidden' : 'scroll'\n    };\n    var baseWidth = this.root ? this.root.clientWidth : null;\n    var menuWidth = Math.max(baseWidth, popoverWidth);\n    return React.createElement('div', {\n      ref: function ref(_ref4) {\n        return _this3.root = _ref4;\n      },\n      tabIndex: disabled ? '-1' : '0',\n      onBlur: this.onBlur,\n      onClick: this.handleClick,\n      onFocus: this.onFocus,\n      onKeyDown: this.handleKeyDown,\n      style: _extends({\n        cursor: disabled ? 'not-allowed' : 'pointer',\n        color: disabled ? palette.disabledColor : palette.textColor,\n        outline: 'none'\n      }, style),\n      title: !this.state.itemsLength ? 'Nothing to show' : ''\n    }, React.createElement(SelectionsPresenter, {\n      disabled: disabled,\n      dropDownIcon: dropDownIcon,\n      errorStyle: errorStyle,\n      errorText: errorText,\n      floatingLabel: floatingLabel,\n      floatingLabelFocusStyle: floatingLabelFocusStyle,\n      floatingLabelStyle: floatingLabelStyle,\n      hintText: hintText,\n      isFocused: this.state.isFocused,\n      isOpen: this.state.isOpen,\n      muiTheme: this.context.muiTheme,\n      selectedValues: this.state.selectedItems,\n      selectionsRenderer: selectionsRenderer,\n      underlineErrorStyle: underlineErrorStyle,\n      underlineFocusStyle: underlineFocusStyle,\n      underlineStyle: underlineStyle\n    }), React.createElement(Popover, {\n      anchorEl: this.root,\n      anchorOrigin: anchorOrigin,\n      canAutoPosition: canAutoPosition,\n      className: popoverClassName,\n      onRequestClose: this.closeMenu,\n      open: this.state.isOpen,\n      style: {\n        height: popoverHeight,\n        width: menuWidth\n      },\n      useLayerForClickAway: false\n    }, this.state.isAutocompleteShown && React.createElement(TextField, {\n      ref: function ref(_ref2) {\n        return _this3.searchTextField = _ref2;\n      },\n      autoFocus: true,\n      hintText: hintTextAutocomplete,\n      inputStyle: autocompleteStyle,\n      onChange: this.handleTextFieldAutocompletionFiltering,\n      onKeyDown: this.handleTextFieldKeyDown,\n      style: {\n        margin: '0 16px 5px',\n        width: 'calc(100% - 32px)'\n      },\n      underlineFocusStyle: autocompleteUnderlineFocusStyle,\n      underlineStyle: autocompleteUnderlineStyle,\n      value: this.state.searchText\n    }), multiple && withResetSelectAllButtons && React.createElement('header', {\n      style: {\n        display: 'flex',\n        alignItems: 'center'\n      }\n    }, React.createElement('div', {\n      onClick: this.selectAll,\n      style: {\n        flex: '50%'\n      }\n    }, selectAllButton), React.createElement('div', {\n      onClick: this.reset,\n      style: {\n        flex: '50%'\n      }\n    }, resetButton)), React.createElement('div', {\n      ref: function ref(_ref3) {\n        return _this3.menu = _ref3;\n      },\n      onKeyDown: this.handleMenuKeyDown,\n      style: menuStyle\n    }, menuItems.length ? React.createElement(InfiniteScroller, {\n      containerHeight: optionsContainerHeight,\n      elementHeight: elementHeight,\n      styles: {\n        scrollableStyle: scrollableStyle\n      },\n      onInfiniteLoad: onInfiniteLoad,\n      infiniteLoadBeginEdgeOffset: infiniteLoadBeginEdgeOffset\n    }, menuItems) : React.createElement(ListItem, {\n      disabled: true,\n      primaryText: noMatchFound,\n      style: _extends({\n        cursor: 'default',\n        padding: '10px 16px'\n      }, noMatchFoundStyle)\n    })), multiple && React.createElement('footer', {\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'flex-end'\n      }\n    }, React.createElement('div', {\n      onClick: this.closeMenu,\n      style: menuFooterStyle\n    }, menuCloseButton))));\n  };\n\n  return SelectField;\n}(Component), _class.contextTypes = {\n  muiTheme: object.isRequired\n}, _class.defaultProps = selectFieldDefaultProps, _initialiseProps = function _initialiseProps() {\n  var _this4 = this;\n\n  this.onFocus = function () {\n    return _this4.setState({\n      isFocused: true\n    });\n  };\n\n  this.onBlur = function () {\n    return !_this4.state.isOpen && _this4.setState({\n      isFocused: false\n    });\n  };\n\n  this.closeMenu = function (reason) {\n    var _props2 = _this4.props,\n        onChange = _props2.onChange,\n        name = _props2.name;\n    if (reason) _this4.setState({\n      isFocused: false\n    }); // if reason === 'clickaway' or 'offscreen'\n\n    _this4.setState({\n      isOpen: false,\n      searchText: ''\n    }, function () {\n      if (!reason) _this4.root.focus();\n      onChange(_this4.state.selectedItems, name);\n    });\n  };\n\n  this.handleClick = function () {\n    return !_this4.props.disabled && _this4.openMenu();\n  };\n\n  this.handleKeyDown = function (event) {\n    return !_this4.props.disabled && /ArrowDown|Enter/.test(event.key) && _this4.openMenu();\n  };\n\n  this.handleTextFieldAutocompletionFiltering = function (event, searchText) {\n    _this4.props.onAutoCompleteTyping(searchText);\n\n    _this4.setState({\n      searchText: searchText\n    }, function () {\n      return _this4.focusTextField();\n    });\n  };\n\n  this.handleTextFieldKeyDown = function (_ref5) {\n    var key = _ref5.key;\n\n    switch (key) {\n      case 'ArrowDown':\n        _this4.focusMenuItem();\n\n        break;\n\n      case 'Escape':\n        _this4.clearTextField();\n\n        _this4.closeMenu();\n\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  this.selectAll = function () {\n    var _props3 = _this4.props,\n        children = _props3.children,\n        autocompleteFilter = _props3.autocompleteFilter;\n    var fixedChildren = Array.isArray(children) ? children : [children];\n    var selectedItems = fixedChildren.reduce(function (nodes, child) {\n      var type = child.type,\n          _child$props2 = child.props,\n          value = _child$props2.value,\n          label = _child$props2.label;\n\n      var passesFilter = function passesFilter(label, value) {\n        return autocompleteFilter(_this4.state.searchText, label || value);\n      };\n\n      if (type !== 'optgroup' && passesFilter(label, value)) {\n        return nodes.concat({\n          value: value,\n          label: label\n        });\n      } else if (type === 'optgroup') {\n        var groupedItems = _this4.selectAllInGroup(child);\n\n        return groupedItems.length ? nodes.concat(groupedItems) : nodes;\n      } else return nodes;\n    }, []);\n\n    _this4.setState({\n      selectedItems: selectedItems\n    }, function () {\n      return _this4.getSelected();\n    });\n  };\n\n  this.reset = function () {\n    return _this4.setState(function (prevState) {\n      return {\n        selectedItems: prevState.initialValue\n      };\n    }, function () {\n      return _this4.getSelected();\n    });\n  };\n\n  this.handleMenuSelection = function (selectedItem) {\n    return function (event) {\n      event.preventDefault();\n      var selectedItems = _this4.state.selectedItems;\n\n      if (_this4.props.multiple) {\n        var selectedItemExists = selectedItems.some(function (obj) {\n          return areEqual(obj.value, selectedItem.value);\n        });\n        var updatedValues = selectedItemExists ? selectedItems.filter(function (obj) {\n          return !areEqual(obj.value, selectedItem.value);\n        }) : selectedItems.concat(selectedItem);\n\n        _this4.setState({\n          selectedItems: updatedValues\n        }, function () {\n          return _this4.getSelected();\n        });\n\n        _this4.clearTextField(function () {\n          return _this4.focusTextField();\n        });\n      } else {\n        var updatedValue = areEqual(selectedItems, selectedItem) ? null : selectedItem;\n\n        _this4.setState({\n          selectedItems: updatedValue\n        }, function () {\n          return _this4.closeMenu();\n        });\n      }\n    };\n  };\n\n  this.getSelected = function () {\n    return _this4.props.onSelect && _this4.props.onSelect(_this4.state.selectedItems, _this4.props.name);\n  };\n\n  this.selectAllInGroup = function (group) {\n    var children = group.props.children;\n\n    var passesFilter = function passesFilter(label, value) {\n      return _this4.props.autocompleteFilter(_this4.state.searchText, label || value);\n    };\n\n    var fixedChildren = Array.isArray(children) ? children : [children];\n    return fixedChildren.reduce(function (nodes, _ref6) {\n      var _ref6$props = _ref6.props,\n          value = _ref6$props.value,\n          label = _ref6$props.label;\n      return passesFilter(label, value) ? nodes.concat({\n        value: value,\n        label: label\n      }) : nodes;\n    }, []);\n  };\n\n  this.handleMenuKeyDown = function (_ref7) {\n    var key = _ref7.key,\n        tabIndex = _ref7.target.tabIndex;\n\n    var cleanMenuItems = _this4.menuItems.filter(function (item) {\n      return !!item;\n    });\n\n    var firstTabIndex = cleanMenuItems[0].props.tabIndex;\n    var lastTabIndex = cleanMenuItems[cleanMenuItems.length - 1].props.tabIndex;\n    var currentElementIndex = cleanMenuItems.findIndex(function (item) {\n      return item.props.tabIndex === tabIndex;\n    });\n\n    switch (key) {\n      case 'ArrowUp':\n        if (+tabIndex === firstTabIndex) {\n          _this4.state.isAutocompleteShown ? _this4.focusTextField() : _this4.focusMenuItem(lastTabIndex);\n        } else {\n          var previousTabIndex = cleanMenuItems.slice(0, currentElementIndex).slice(-1)[0].props.tabIndex;\n\n          _this4.focusMenuItem(previousTabIndex);\n        }\n\n        break;\n\n      case 'ArrowDown':\n        if (+tabIndex === lastTabIndex) {\n          _this4.state.isAutocompleteShown ? _this4.focusTextField() : _this4.focusMenuItem();\n        } else {\n          var nextTabIndex = cleanMenuItems.slice(currentElementIndex + 1)[0].props.tabIndex;\n\n          _this4.focusMenuItem(nextTabIndex);\n        }\n\n        break;\n\n      case 'PageUp':\n        _this4.focusMenuItem();\n\n        break;\n\n      case 'PageDown':\n        _this4.focusMenuItem(lastTabIndex);\n\n        break;\n\n      case 'Escape':\n        _this4.closeMenu();\n\n        break;\n\n      default:\n        break;\n    }\n  };\n}, _temp);\nexport { SelectField as default };\nSelectField.propTypes = process.env.NODE_ENV !== \"production\" ? selectFieldTypes : {};","map":{"version":3,"sources":["/home/user/Desktop/milonux-sq-dashboard-59aefe7abad7/node_modules/material-ui-superselectfield/es/SuperSelectField.js"],"names":["_typeof","Symbol","iterator","obj","constructor","prototype","_extends","Object","assign","target","i","arguments","length","source","key","hasOwnProperty","call","_class","_temp","_initialiseProps","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","value","enumerable","writable","configurable","setPrototypeOf","__proto__","React","Component","object","InfiniteScroller","ListItem","Popover","TextField","SelectionsPresenter","getChildrenLength","areEqual","selectFieldTypes","selectFieldDefaultProps","SelectField","_Component","props","context","_this","children","multiple","showAutocompleteThreshold","itemsLength","state","isOpen","isFocused","initialValue","isAutocompleteShown","showAutocomplete","selectedItems","searchText","menuItems","UNSAFE_componentWillReceiveProps","nextProps","setState","threshold","undefined","componentDidMount","openImmediately","openMenu","componentDidUpdate","prevProps","prevState","_this2","onMenuOpen","focusTextField","focusMenuItem","index","targetMenuItem","find","item","tabIndex","applyFocusState","searchTextField","focus","clearTextField","callback","keepSearchOnSelect","render","_this3","_props","anchorOrigin","autocompleteFilter","autocompleteStyle","autocompleteUnderlineFocusStyle","autocompleteUnderlineStyle","canAutoPosition","checkPosition","checkedIcon","disabled","dropDownIcon","elementHeight","errorStyle","errorText","floatingLabel","floatingLabelFocusStyle","floatingLabelStyle","hintText","hintTextAutocomplete","hoverColor","infiniteLoadBeginEdgeOffset","innerDivStyle","menuCloseButton","menuFooterStyle","menuGroupStyle","menuStyle","nb2show","noMatchFound","noMatchFoundStyle","popoverClassName","popoverWidth","onInfiniteLoad","resetButton","selectAllButton","selectedMenuItemStyle","selectionsRenderer","style","unCheckedIcon","underlineErrorStyle","underlineFocusStyle","underlineStyle","withResetSelectAllButtons","_context$muiTheme","muiTheme","palette","baseTheme","menuItem","mergedSelectedMenuItemStyle","color","selectedTextColor","fill","mergedHoverColor","menuItemBuilder","nodes","child","_child$props","childValue","label","isSelected","Array","isArray","some","leftCheckbox","rightCheckbox","marginTop","concat","createElement","ref","_ref","disableFocusRipple","paddingTop","paddingBottom","paddingLeft","paddingRight","leftIcon","onClick","handleMenuSelection","primaryText","rightIcon","fixedChildren","reduce","type","nextIndex","menuGroup","cursor","groupedItems","cpc","idx","autoCompleteHeight","headerHeight","footerHeight","noMatchFoundHeight","optionsContainerHeight","totalHeight","height","popoverHeight","scrollableStyle","overflowY","baseWidth","root","clientWidth","menuWidth","Math","max","_ref4","onBlur","handleClick","onFocus","onKeyDown","handleKeyDown","disabledColor","textColor","outline","title","selectedValues","anchorEl","className","onRequestClose","closeMenu","open","width","useLayerForClickAway","_ref2","autoFocus","inputStyle","onChange","handleTextFieldAutocompletionFiltering","handleTextFieldKeyDown","margin","display","alignItems","selectAll","flex","reset","_ref3","menu","handleMenuKeyDown","containerHeight","styles","padding","justifyContent","contextTypes","isRequired","defaultProps","_this4","reason","_props2","name","event","test","onAutoCompleteTyping","_ref5","_props3","_child$props2","passesFilter","selectAllInGroup","getSelected","selectedItem","preventDefault","selectedItemExists","updatedValues","filter","updatedValue","onSelect","group","_ref6","_ref6$props","_ref7","cleanMenuItems","firstTabIndex","lastTabIndex","currentElementIndex","findIndex","previousTabIndex","slice","nextTabIndex","default","propTypes","process","env","NODE_ENV"],"mappings":"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","sourcesContent":["var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _class, _temp, _initialiseProps;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\r\n * Created by RaphaÃ«l Morineau on 28 Oct 2016.\r\n */\nimport React, { Component } from 'react';\nimport { object } from 'prop-types';\nimport InfiniteScroller from 'react-infinite';\nimport ListItem from 'material-ui/List/ListItem';\nimport Popover from 'material-ui/Popover/Popover';\nimport TextField from 'material-ui/TextField/TextField';\n\nimport SelectionsPresenter from './SelectionsPresenter';\nimport { getChildrenLength, areEqual } from './utils';\nimport { selectFieldTypes } from './types';\nimport { selectFieldDefaultProps } from './defaultProps';\n\nvar SelectField = (_temp = _class = function (_Component) {\n  _inherits(SelectField, _Component);\n\n  function SelectField(props, context) {\n    _classCallCheck(this, SelectField);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props, context));\n\n    _initialiseProps.call(_this);\n\n    var children = props.children,\n        value = props.value,\n        multiple = props.multiple,\n        showAutocompleteThreshold = props.showAutocompleteThreshold;\n\n    var itemsLength = getChildrenLength(children);\n    _this.state = {\n      isOpen: false,\n      isFocused: false,\n      initialValue: value || (multiple ? [] : null),\n      itemsLength: itemsLength,\n      isAutocompleteShown: _this.showAutocomplete(showAutocompleteThreshold, itemsLength),\n      selectedItems: value || (multiple ? [] : null),\n      searchText: ''\n    };\n    _this.menuItems = [];\n    return _this;\n  }\n\n  // eslint-disable-next-line camelcase\n  SelectField.prototype.UNSAFE_componentWillReceiveProps = function UNSAFE_componentWillReceiveProps(nextProps) {\n    if (!areEqual(nextProps.value, this.state.selectedItems)) {\n      this.setState({ selectedItems: nextProps.value });\n    }\n    if (!areEqual(nextProps.children, this.props.children)) {\n      var itemsLength = getChildrenLength(nextProps.children);\n      this.setState({\n        itemsLength: itemsLength,\n        isAutocompleteShown: this.showAutocomplete(this.props.showAutocompleteThreshold, itemsLength)\n      });\n    }\n  };\n\n  SelectField.prototype.showAutocomplete = function showAutocomplete() {\n    var threshold = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var itemsLength = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n    if (typeof threshold === 'number') return itemsLength >= threshold;\n    switch (threshold) {\n      case 'always':\n        return true;\n      case 'never':\n      default:\n        return false;\n    }\n  };\n\n  SelectField.prototype.componentDidMount = function componentDidMount() {\n    // Potential problem with Popover ?\n    // https://github.com/callemall/material-ui/blob/master/src/DropDownMenu/DropDownMenu.js#L237\n    if (this.props.openImmediately) this.openMenu();\n  };\n\n  SelectField.prototype.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {};\n\n  SelectField.prototype.openMenu = function openMenu() {\n    var _this2 = this;\n\n    if (!this.state.isOpen) this.props.onMenuOpen();\n    if (this.state.itemsLength || this.props.showAutocompleteThreshold === 'always') {\n      this.setState({ isOpen: true }, function () {\n        return _this2.focusTextField();\n      });\n    }\n  };\n\n  // FIXME: both focusTextField and focusMenuItem don't really focus the targeted element, user must hit another key to trigger the actual focus... need to find a solution for a true direct focus\n\n\n  SelectField.prototype.focusMenuItem = function focusMenuItem(index) {\n    var targetMenuItem = this.menuItems.find(function (item) {\n      return !!item && (index ? item.props.tabIndex === index : true);\n    });\n    if (targetMenuItem) targetMenuItem.applyFocusState('keyboard-focused');\n  };\n\n  SelectField.prototype.focusTextField = function focusTextField() {\n    this.state.isAutocompleteShown && this.searchTextField ? this.searchTextField.focus() : this.focusMenuItem();\n  };\n\n  SelectField.prototype.clearTextField = function clearTextField(callback) {\n    this.props.keepSearchOnSelect ? typeof callback === 'function' && callback() // don't reset the autocomplete\n    : this.setState({ searchText: '' }, callback);\n  };\n\n  /**\r\n   * Main Component Wrapper methods\r\n   */\n  // toggle instead of close ? (in case user changes targetOrigin/anchorOrigin)\n\n\n  /**\r\n   * TextField autocomplete methods\r\n   */\n\n\n  /**\r\n   * Menu Header methods\r\n   */\n\n\n  /**\r\n   * Menu methods\r\n   */\n\n\n  // group must be of type 'optgroup'\n\n\n  // TODO: add Shift+Tab\n  /**\r\n   * this.menuItems can contain uncontinuous React elements, because of filtering\r\n   */\n\n\n  SelectField.prototype.render = function render() {\n    var _this3 = this;\n\n    var _props = this.props,\n        anchorOrigin = _props.anchorOrigin,\n        autocompleteFilter = _props.autocompleteFilter,\n        autocompleteStyle = _props.autocompleteStyle,\n        autocompleteUnderlineFocusStyle = _props.autocompleteUnderlineFocusStyle,\n        autocompleteUnderlineStyle = _props.autocompleteUnderlineStyle,\n        canAutoPosition = _props.canAutoPosition,\n        checkPosition = _props.checkPosition,\n        checkedIcon = _props.checkedIcon,\n        children = _props.children,\n        disabled = _props.disabled,\n        dropDownIcon = _props.dropDownIcon,\n        elementHeight = _props.elementHeight,\n        errorStyle = _props.errorStyle,\n        errorText = _props.errorText,\n        floatingLabel = _props.floatingLabel,\n        floatingLabelFocusStyle = _props.floatingLabelFocusStyle,\n        floatingLabelStyle = _props.floatingLabelStyle,\n        hintText = _props.hintText,\n        hintTextAutocomplete = _props.hintTextAutocomplete,\n        hoverColor = _props.hoverColor,\n        infiniteLoadBeginEdgeOffset = _props.infiniteLoadBeginEdgeOffset,\n        innerDivStyle = _props.innerDivStyle,\n        menuCloseButton = _props.menuCloseButton,\n        menuFooterStyle = _props.menuFooterStyle,\n        menuGroupStyle = _props.menuGroupStyle,\n        menuStyle = _props.menuStyle,\n        multiple = _props.multiple,\n        nb2show = _props.nb2show,\n        noMatchFound = _props.noMatchFound,\n        noMatchFoundStyle = _props.noMatchFoundStyle,\n        popoverClassName = _props.popoverClassName,\n        popoverWidth = _props.popoverWidth,\n        onInfiniteLoad = _props.onInfiniteLoad,\n        resetButton = _props.resetButton,\n        selectAllButton = _props.selectAllButton,\n        selectedMenuItemStyle = _props.selectedMenuItemStyle,\n        selectionsRenderer = _props.selectionsRenderer,\n        style = _props.style,\n        unCheckedIcon = _props.unCheckedIcon,\n        underlineErrorStyle = _props.underlineErrorStyle,\n        underlineFocusStyle = _props.underlineFocusStyle,\n        underlineStyle = _props.underlineStyle,\n        withResetSelectAllButtons = _props.withResetSelectAllButtons;\n\n    // Default style depending on Material-UI context (muiTheme)\n\n    var _context$muiTheme = this.context.muiTheme,\n        palette = _context$muiTheme.baseTheme.palette,\n        menuItem = _context$muiTheme.menuItem;\n\n\n    var mergedSelectedMenuItemStyle = _extends({\n      color: menuItem.selectedTextColor\n    }, selectedMenuItemStyle);\n    if (checkedIcon) {\n      checkedIcon.props.style.fill = mergedSelectedMenuItemStyle.color;\n    }\n    var mergedHoverColor = hoverColor || menuItem.hoverColor;\n\n    /**\r\n     * MenuItems building, based on user's children\r\n     * 1st function is the base process for producing a MenuItem,\r\n     * including filtering from the Autocomplete.\r\n     * 2nd function is the main loop over children array,\r\n     * accounting for optgroups.\r\n     */\n    var menuItemBuilder = function menuItemBuilder(nodes, child, index) {\n      var selectedItems = _this3.state.selectedItems;\n      var _child$props = child.props,\n          childValue = _child$props.value,\n          label = _child$props.label;\n\n      if (!autocompleteFilter(_this3.state.searchText, label || childValue)) {\n        return nodes;\n      }\n      var isSelected = Array.isArray(selectedItems) ? selectedItems.some(function (obj) {\n        return areEqual(obj.value, childValue);\n      }) : selectedItems ? selectedItems.value === childValue : false;\n      var leftCheckbox = multiple && checkPosition === 'left' && (isSelected ? checkedIcon : unCheckedIcon) || null;\n      var rightCheckbox = multiple && checkPosition === 'right' && (isSelected ? checkedIcon : unCheckedIcon) || null;\n      if (multiple && checkPosition !== '') {\n        if (checkedIcon) checkedIcon.props.style.marginTop = 0;\n        if (unCheckedIcon) unCheckedIcon.props.style.marginTop = 0;\n      }\n      return [].concat(nodes, [React.createElement(ListItem, {\n        key: ++index,\n        tabIndex: index,\n        ref: function ref(_ref) {\n          return _this3.menuItems[++index] = _ref;\n        },\n        disableFocusRipple: true,\n        hoverColor: mergedHoverColor,\n        innerDivStyle: _extends({\n          paddingTop: 10,\n          paddingBottom: 10,\n          paddingLeft: multiple && checkPosition === 'left' ? 56 : 16,\n          paddingRight: multiple && checkPosition === 'right' ? 56 : 16\n        }, innerDivStyle),\n        leftIcon: leftCheckbox,\n        onClick: _this3.handleMenuSelection({ value: childValue, label: label }),\n        primaryText: child,\n        rightIcon: rightCheckbox,\n        style: isSelected ? mergedSelectedMenuItemStyle : {}\n      })]);\n    };\n\n    var fixedChildren = Array.isArray(children) ? children : [children];\n\n    var menuItems = !disabled && fixedChildren.length && this.state.isOpen && fixedChildren.reduce(function (nodes, child, index) {\n      if (child.type !== 'optgroup') {\n        return menuItemBuilder(nodes, child, index);\n      }\n      var nextIndex = nodes.length ? +nodes[nodes.length - 1].key + 1 : 0;\n      var menuGroup = React.createElement(ListItem, {\n        disabled: true,\n        key: nextIndex,\n        primaryText: child.props.label,\n        style: _extends({\n          cursor: 'default',\n          paddingTop: 10,\n          paddingBottom: 10\n        }, menuGroupStyle)\n      });\n      var groupedItems = [];\n      var cpc = child.props.children;\n      if (cpc) {\n        if (Array.isArray(cpc) && cpc.length) {\n          groupedItems = cpc.reduce(function (nodes, child, idx) {\n            return menuItemBuilder(nodes, child, nextIndex + idx);\n          }, []);\n        } else if ((typeof cpc === 'undefined' ? 'undefined' : _typeof(cpc)) === 'object') {\n          groupedItems = menuItemBuilder(nodes, cpc, nextIndex);\n        }\n      }\n      return groupedItems.length ? [].concat(nodes, [menuGroup], groupedItems) : nodes;\n    }, []);\n\n    var autoCompleteHeight = this.state.isAutocompleteShown ? 53 : 0;\n    var headerHeight = multiple && withResetSelectAllButtons ? 36 : 0;\n    var footerHeight = multiple && menuCloseButton ? 36 : 0;\n    var noMatchFoundHeight = 36;\n    var optionsContainerHeight = (Array.isArray(elementHeight) ? elementHeight.reduce(function (totalHeight, height) {\n      return totalHeight + height;\n    }, 0) : elementHeight * (nb2show < menuItems.length ? nb2show : menuItems.length)) || 0;\n    var popoverHeight = autoCompleteHeight + headerHeight + (optionsContainerHeight || noMatchFoundHeight) + footerHeight + 6;\n\n    var scrollableStyle = {\n      overflowY: nb2show >= menuItems.length ? 'hidden' : 'scroll'\n    };\n\n    var baseWidth = this.root ? this.root.clientWidth : null;\n    var menuWidth = Math.max(baseWidth, popoverWidth);\n\n    return React.createElement(\n      'div',\n      {\n        ref: function ref(_ref4) {\n          return _this3.root = _ref4;\n        },\n        tabIndex: disabled ? '-1' : '0',\n        onBlur: this.onBlur,\n        onClick: this.handleClick,\n        onFocus: this.onFocus,\n        onKeyDown: this.handleKeyDown,\n        style: _extends({\n          cursor: disabled ? 'not-allowed' : 'pointer',\n          color: disabled ? palette.disabledColor : palette.textColor,\n          outline: 'none'\n        }, style),\n        title: !this.state.itemsLength ? 'Nothing to show' : ''\n      },\n      React.createElement(SelectionsPresenter, {\n        disabled: disabled,\n        dropDownIcon: dropDownIcon,\n        errorStyle: errorStyle,\n        errorText: errorText,\n        floatingLabel: floatingLabel,\n        floatingLabelFocusStyle: floatingLabelFocusStyle,\n        floatingLabelStyle: floatingLabelStyle,\n        hintText: hintText,\n        isFocused: this.state.isFocused,\n        isOpen: this.state.isOpen,\n        muiTheme: this.context.muiTheme,\n        selectedValues: this.state.selectedItems,\n        selectionsRenderer: selectionsRenderer,\n        underlineErrorStyle: underlineErrorStyle,\n        underlineFocusStyle: underlineFocusStyle,\n        underlineStyle: underlineStyle\n      }),\n      React.createElement(\n        Popover,\n        {\n          anchorEl: this.root,\n          anchorOrigin: anchorOrigin,\n          canAutoPosition: canAutoPosition,\n          className: popoverClassName,\n          onRequestClose: this.closeMenu,\n          open: this.state.isOpen,\n          style: { height: popoverHeight, width: menuWidth },\n          useLayerForClickAway: false\n        },\n        this.state.isAutocompleteShown && React.createElement(TextField, {\n          ref: function ref(_ref2) {\n            return _this3.searchTextField = _ref2;\n          },\n          autoFocus: true,\n          hintText: hintTextAutocomplete,\n          inputStyle: autocompleteStyle,\n          onChange: this.handleTextFieldAutocompletionFiltering,\n          onKeyDown: this.handleTextFieldKeyDown,\n          style: { margin: '0 16px 5px', width: 'calc(100% - 32px)' },\n          underlineFocusStyle: autocompleteUnderlineFocusStyle,\n          underlineStyle: autocompleteUnderlineStyle,\n          value: this.state.searchText\n        }),\n        multiple && withResetSelectAllButtons && React.createElement(\n          'header',\n          { style: { display: 'flex', alignItems: 'center' } },\n          React.createElement(\n            'div',\n            { onClick: this.selectAll, style: { flex: '50%' } },\n            selectAllButton\n          ),\n          React.createElement(\n            'div',\n            { onClick: this.reset, style: { flex: '50%' } },\n            resetButton\n          )\n        ),\n        React.createElement(\n          'div',\n          { ref: function ref(_ref3) {\n              return _this3.menu = _ref3;\n            }, onKeyDown: this.handleMenuKeyDown, style: menuStyle },\n          menuItems.length ? React.createElement(\n            InfiniteScroller,\n            {\n              containerHeight: optionsContainerHeight,\n              elementHeight: elementHeight,\n              styles: { scrollableStyle: scrollableStyle },\n              onInfiniteLoad: onInfiniteLoad,\n              infiniteLoadBeginEdgeOffset: infiniteLoadBeginEdgeOffset\n            },\n            menuItems\n          ) : React.createElement(ListItem, {\n            disabled: true,\n            primaryText: noMatchFound,\n            style: _extends({\n              cursor: 'default',\n              padding: '10px 16px'\n            }, noMatchFoundStyle)\n          })\n        ),\n        multiple && React.createElement(\n          'footer',\n          {\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'flex-end'\n            }\n          },\n          React.createElement(\n            'div',\n            { onClick: this.closeMenu, style: menuFooterStyle },\n            menuCloseButton\n          )\n        )\n      )\n    );\n  };\n\n  return SelectField;\n}(Component), _class.contextTypes = {\n  muiTheme: object.isRequired\n}, _class.defaultProps = selectFieldDefaultProps, _initialiseProps = function _initialiseProps() {\n  var _this4 = this;\n\n  this.onFocus = function () {\n    return _this4.setState({ isFocused: true });\n  };\n\n  this.onBlur = function () {\n    return !_this4.state.isOpen && _this4.setState({ isFocused: false });\n  };\n\n  this.closeMenu = function (reason) {\n    var _props2 = _this4.props,\n        onChange = _props2.onChange,\n        name = _props2.name;\n\n    if (reason) _this4.setState({ isFocused: false }); // if reason === 'clickaway' or 'offscreen'\n    _this4.setState({ isOpen: false, searchText: '' }, function () {\n      if (!reason) _this4.root.focus();\n      onChange(_this4.state.selectedItems, name);\n    });\n  };\n\n  this.handleClick = function () {\n    return !_this4.props.disabled && _this4.openMenu();\n  };\n\n  this.handleKeyDown = function (event) {\n    return !_this4.props.disabled && /ArrowDown|Enter/.test(event.key) && _this4.openMenu();\n  };\n\n  this.handleTextFieldAutocompletionFiltering = function (event, searchText) {\n    _this4.props.onAutoCompleteTyping(searchText);\n    _this4.setState({ searchText: searchText }, function () {\n      return _this4.focusTextField();\n    });\n  };\n\n  this.handleTextFieldKeyDown = function (_ref5) {\n    var key = _ref5.key;\n\n    switch (key) {\n      case 'ArrowDown':\n        _this4.focusMenuItem();\n        break;\n\n      case 'Escape':\n        _this4.clearTextField();\n        _this4.closeMenu();\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  this.selectAll = function () {\n    var _props3 = _this4.props,\n        children = _props3.children,\n        autocompleteFilter = _props3.autocompleteFilter;\n\n    var fixedChildren = Array.isArray(children) ? children : [children];\n    var selectedItems = fixedChildren.reduce(function (nodes, child) {\n      var type = child.type,\n          _child$props2 = child.props,\n          value = _child$props2.value,\n          label = _child$props2.label;\n\n      var passesFilter = function passesFilter(label, value) {\n        return autocompleteFilter(_this4.state.searchText, label || value);\n      };\n      if (type !== 'optgroup' && passesFilter(label, value)) {\n        return nodes.concat({ value: value, label: label });\n      } else if (type === 'optgroup') {\n        var groupedItems = _this4.selectAllInGroup(child);\n        return groupedItems.length ? nodes.concat(groupedItems) : nodes;\n      } else return nodes;\n    }, []);\n    _this4.setState({ selectedItems: selectedItems }, function () {\n      return _this4.getSelected();\n    });\n  };\n\n  this.reset = function () {\n    return _this4.setState(function (prevState) {\n      return { selectedItems: prevState.initialValue };\n    }, function () {\n      return _this4.getSelected();\n    });\n  };\n\n  this.handleMenuSelection = function (selectedItem) {\n    return function (event) {\n      event.preventDefault();\n      var selectedItems = _this4.state.selectedItems;\n\n      if (_this4.props.multiple) {\n        var selectedItemExists = selectedItems.some(function (obj) {\n          return areEqual(obj.value, selectedItem.value);\n        });\n        var updatedValues = selectedItemExists ? selectedItems.filter(function (obj) {\n          return !areEqual(obj.value, selectedItem.value);\n        }) : selectedItems.concat(selectedItem);\n        _this4.setState({ selectedItems: updatedValues }, function () {\n          return _this4.getSelected();\n        });\n        _this4.clearTextField(function () {\n          return _this4.focusTextField();\n        });\n      } else {\n        var updatedValue = areEqual(selectedItems, selectedItem) ? null : selectedItem;\n        _this4.setState({ selectedItems: updatedValue }, function () {\n          return _this4.closeMenu();\n        });\n      }\n    };\n  };\n\n  this.getSelected = function () {\n    return _this4.props.onSelect && _this4.props.onSelect(_this4.state.selectedItems, _this4.props.name);\n  };\n\n  this.selectAllInGroup = function (group) {\n    var children = group.props.children;\n\n    var passesFilter = function passesFilter(label, value) {\n      return _this4.props.autocompleteFilter(_this4.state.searchText, label || value);\n    };\n    var fixedChildren = Array.isArray(children) ? children : [children];\n    return fixedChildren.reduce(function (nodes, _ref6) {\n      var _ref6$props = _ref6.props,\n          value = _ref6$props.value,\n          label = _ref6$props.label;\n\n      return passesFilter(label, value) ? nodes.concat({ value: value, label: label }) : nodes;\n    }, []);\n  };\n\n  this.handleMenuKeyDown = function (_ref7) {\n    var key = _ref7.key,\n        tabIndex = _ref7.target.tabIndex;\n\n    var cleanMenuItems = _this4.menuItems.filter(function (item) {\n      return !!item;\n    });\n    var firstTabIndex = cleanMenuItems[0].props.tabIndex;\n    var lastTabIndex = cleanMenuItems[cleanMenuItems.length - 1].props.tabIndex;\n    var currentElementIndex = cleanMenuItems.findIndex(function (item) {\n      return item.props.tabIndex === tabIndex;\n    });\n    switch (key) {\n      case 'ArrowUp':\n        if (+tabIndex === firstTabIndex) {\n          _this4.state.isAutocompleteShown ? _this4.focusTextField() : _this4.focusMenuItem(lastTabIndex);\n        } else {\n          var previousTabIndex = cleanMenuItems.slice(0, currentElementIndex).slice(-1)[0].props.tabIndex;\n          _this4.focusMenuItem(previousTabIndex);\n        }\n        break;\n\n      case 'ArrowDown':\n        if (+tabIndex === lastTabIndex) {\n          _this4.state.isAutocompleteShown ? _this4.focusTextField() : _this4.focusMenuItem();\n        } else {\n          var nextTabIndex = cleanMenuItems.slice(currentElementIndex + 1)[0].props.tabIndex;\n          _this4.focusMenuItem(nextTabIndex);\n        }\n        break;\n\n      case 'PageUp':\n        _this4.focusMenuItem();\n        break;\n\n      case 'PageDown':\n        _this4.focusMenuItem(lastTabIndex);\n        break;\n\n      case 'Escape':\n        _this4.closeMenu();\n        break;\n\n      default:\n        break;\n    }\n  };\n}, _temp);\nexport { SelectField as default };\nSelectField.propTypes = process.env.NODE_ENV !== \"production\" ? selectFieldTypes : {};"]},"metadata":{},"sourceType":"module"}