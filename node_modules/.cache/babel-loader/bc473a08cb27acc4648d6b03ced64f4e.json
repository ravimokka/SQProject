{"ast":null,"code":"/**\n* Copyright 2012-2019, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar Registry = require('../registry');\n\nexports.getDelay = function (fullLayout) {\n  if (!fullLayout._has) return 0;\n  return fullLayout._has('gl3d') || fullLayout._has('gl2d') || fullLayout._has('mapbox') ? 500 : 0;\n};\n\nexports.getRedrawFunc = function (gd) {\n  return function () {\n    var fullLayout = gd._fullLayout || {};\n\n    var hasPolar = fullLayout._has && fullLayout._has('polar');\n\n    var hasLegacyPolar = !hasPolar && gd.data && gd.data[0] && gd.data[0].r;\n\n    if (!hasLegacyPolar) {\n      Registry.getComponentMethod('colorbar', 'draw')(gd);\n    }\n  };\n};\n\nexports.encodeSVG = function (svg) {\n  return 'data:image/svg+xml,' + encodeURIComponent(svg);\n};\n\nvar DOM_URL = window.URL || window.webkitURL;\n\nexports.createObjectURL = function (blob) {\n  return DOM_URL.createObjectURL(blob);\n};\n\nexports.revokeObjectURL = function (url) {\n  return DOM_URL.revokeObjectURL(url);\n};\n\nexports.createBlob = function (url, format) {\n  if (format === 'svg') {\n    return new window.Blob([url], {\n      type: 'image/svg+xml;charset=utf-8'\n    });\n  } else {\n    var binary = fixBinary(window.atob(url));\n    return new window.Blob([binary], {\n      type: 'image/' + format\n    });\n  }\n};\n\nexports.octetStream = function (s) {\n  document.location.href = 'data:application/octet-stream' + s;\n}; // Taken from https://bl.ocks.org/nolanlawson/0eac306e4dac2114c752\n\n\nfunction fixBinary(b) {\n  var len = b.length;\n  var buf = new ArrayBuffer(len);\n  var arr = new Uint8Array(buf);\n\n  for (var i = 0; i < len; i++) {\n    arr[i] = b.charCodeAt(i);\n  }\n\n  return buf;\n}\n\nexports.IMAGE_URL_PREFIX = /^data:image\\/\\w+;base64,/;\nexports.MSG_IE_BAD_FORMAT = 'Sorry IE does not support downloading from canvas. Try {format:\\'svg\\'} instead.';","map":null,"metadata":{},"sourceType":"script"}