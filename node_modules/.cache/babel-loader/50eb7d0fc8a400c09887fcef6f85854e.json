{"ast":null,"code":"var _jsxFileName = \"/home/user/Desktop/milonux-sq-dashboard-59aefe7abad7/src/Personal/Layout/chart_room.js\";\nimport React, { Component, useState, useEffect } from \"react\";\nimport { Layout, Menu, Dropdown, Icon, Button, Avatar, Drawer, Input } from \"antd\";\nimport { Link } from \"react-router-dom\";\nimport AppRouter from \"../../router\";\nimport { NotificationTab } from \"../components/Header\";\nimport \"./PageLayout.scss\";\nimport ReactApexChart from 'react-apexcharts';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport $ from 'jquery';\nimport Popper from 'popper.js';\nimport 'bootstrap/dist/js/bootstrap.bundle.min';\nimport { isAbsolute } from \"path\";\nimport \"./chat.css\";\nimport axios from \"axios\";\nimport { Host } from \"../../Host\";\nimport firebase from 'firebase';\nconst Config = {\n  apiKey: \"AIzaSyB5fOOl4b5DpbBhaeXAL-61qkpJoENQeTY\",\n  authDomain: \"sqd-project.firebaseapp.com\",\n  databaseURL: \"https://sqd-project.firebaseio.com\",\n  projectId: \"sqd-project\",\n  storageBucket: \"sqd-project.appspot.com\",\n  messagingSenderId: \"727802836038\",\n  appId: \"1:727802836038:web:44732927a6e01d5abdc647\",\n  measurementId: \"G-YVGMP4HC63\"\n};\nfirebase.initializeApp(Config);\n\nclass ChartRoom extends Component {\n  constructor(props) {\n    super(props);\n\n    this.selectUser = (username, id) => {\n      this.setState({\n        msg_list: []\n      });\n      this.setState({\n        massage_box: true\n      });\n      this.setState({\n        select_username: username\n      });\n      this.setState({\n        received_id: id\n      });\n      this.setState({\n        sel_u_id: id\n      });\n      this.allMassageList(id);\n    };\n\n    this.handleSendMassage = e => {\n      this.setState({\n        massage: this.refs.msg.value\n      });\n      var newItem = {\n        user_Id: this.state.user_id,\n        send_Id: this.state.user_id,\n        received_Id: this.state.received_id,\n        message: this.state.message,\n        msg_Status: true,\n        timestamp: firebase.database.ServerValue.TIMESTAMP\n      };\n      this.messageSend.push(newItem);\n      this.setState({\n        message: ''\n      });\n    };\n\n    this.state = {\n      online: false,\n      massage_box: false,\n      select_username: '',\n      user_list: [],\n      userName: 'Vamsi',\n      user_id: '',\n      sel_u_id: '',\n      send_msg_list: [],\n      received_list: [],\n      send_id: '',\n      received_id: '',\n      text: 'sqd_massages',\n      user_text: 'users',\n      user_state: '',\n      msg: '',\n      message: '',\n      user_Name: '',\n      user_Email: '',\n      massage_List: '',\n      msg_list: [{\n        'massage': 'hi'\n      }]\n    };\n    this.messageSend = firebase.database().ref().child('messages/' + this.state.text);\n    this.allMassageList();\n    this.userStatus = firebase.database().ref().child('messages/' + this.state.user_text);\n    this.allUserStatus();\n  }\n\n  componentWillMount() {\n    var profile_data = JSON.parse(sessionStorage.getItem(\"session_data\"));\n    this.setState({\n      user_Name: profile_data['username']\n    });\n    this.setState({\n      user_Email: profile_data['email']\n    });\n    this.loadAllUserList();\n    this.setState({\n      user_id: profile_data['user_id']\n    });\n  }\n\n  async loadAllUserList() {\n    this.setState({\n      user_list: []\n    });\n    var profile_data = JSON.parse(sessionStorage.getItem(\"session_data\"));\n    const promise = await axios.post(Host.loginURL + \"/chat_user_api\", {\n      username: profile_data['username'],\n      email: profile_data['email']\n    });\n    const status = promise.status;\n\n    if (status === 200) {\n      const users_list = promise.data.users;\n      this.setState({\n        user_list: users_list\n      });\n    }\n  }\n\n  handleKeyPress(event) {\n    if (event.key !== 'Enter') return;\n    this.handleSendMassage();\n  }\n\n  handleChange(event) {\n    this.setState({\n      message: event.target.value\n    });\n  }\n\n  allUserStatus() {\n    this.userStatus.on('value', message => {\n      if (message.val() != null) {\n        var i;\n        var users = this.state.user_list;\n        console.log(users);\n        var u_list = Object.values(message.val());\n\n        for (i = 0; i < Object.keys(u_list).length; i++) {\n          for (i = 0; i < Object.keys(users).length; i++) {\n            if (users[i][\"id\"] == 1) {\n              if (u_list[i][\"user_status\"] == 'online') {\n                users['u_s'] = 'Online';\n              } else {\n                users['u_s'] = 'Offline';\n              }\n            }\n          }\n        }\n\n        this.setState({\n          user_state: u_list\n        });\n      } else {\n        this.setState({\n          user_state: []\n        });\n      }\n    });\n  }\n\n  async allMassageList(id) {\n    const s_id = id;\n    this.msg = firebase.database().ref().child('messages/' + this.state.text).on('value', message => {\n      if (message.val() != null) {\n        var i;\n        var m_list = [];\n        var rsm_list = Object.values(message.val());\n\n        for (i = 0; i < Object.keys(rsm_list).length; i++) {\n          if (this.state.user_id == rsm_list[i]['received_Id'] || this.state.user_id == rsm_list[i]['send_Id']) {\n            var re_data = rsm_list[i];\n            m_list.push(re_data);\n          }\n\n          this.setState({\n            msg_list: m_list\n          });\n        }\n      } else {\n        this.setState({\n          msg_list: []\n        });\n      }\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      class: \"messaging\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"inbox_msg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"inbox_people\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"headind_srch\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"recent_heading\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, \"Users\")), React.createElement(\"div\", {\n      class: \"srch_bar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"stylish-input-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      class: \"search-bar\",\n      placeholder: \"Search\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    })))), React.createElement(\"div\", {\n      class: \"inbox_chat scroll\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, this.state.user_list.map((value, index) => React.createElement(\"div\", {\n      class: \"chat_list active_chat\",\n      key: index,\n      onClick: () => this.selectUser(value.username, value.id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"chat_people\",\n      value: this.state.select_username,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: \"https://ptetutorials.com/images/user-profile.png\",\n      alt: \"sunil\",\n      class: \"chat_img\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      class: \"chat_ib\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      value: value.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, value.username, \" \", value.id, React.createElement(\"span\", {\n      class: \"online\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    })), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, \"new user for sq dashboard\"))))))), React.createElement(\"div\", {\n      class: \"mesgs\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"alert alert-success  select_user\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      style: {\n        marginLeft: \"19px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }, this.state.select_username), React.createElement(\"img\", {\n      src: \"https://ptetutorials.com/images/user-profile.png\",\n      alt: \"sunil\",\n      class: \"hear_user\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    })), this.state.massage_box == true ? React.createElement(\"div\", {\n      class: \"msg_history\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"incoming_msg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, this.state.msg_list.map((value, index) => React.createElement(\"div\", {\n      class: \"received_msg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    }, this.state.sel_u_id == value.send_Id ? React.createElement(\"div\", {\n      class: \"received_withd_msg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }, value.message, \" \"), React.createElement(\"span\", {\n      class: \"time_date\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    })) : null, this.state.sel_u_id == value.received_Id ? React.createElement(\"div\", {\n      class: \"outgoing_msg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"sent_msg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }, value.message, \" \"), React.createElement(\"span\", {\n      class: \"time_date\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }))) : null)))) : React.createElement(\"h2\", {\n      class: \"msg_history\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256\n      },\n      __self: this\n    }, \" welcome Message Chatting\"), React.createElement(\"div\", {\n      class: \"type_msg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"input_msg_write\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      ref: \"msg\",\n      class: \"write_msg\",\n      placeholder: \"Type a message\",\n      value: this.state.message,\n      onKeyPress: this.handleKeyPress.bind(this),\n      onChange: this.handleChange.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      class: \"msg_send_btn\",\n      type: \"button\",\n      onClick: this.handleSendMassage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      class: \"fa fa-paper-plane\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266\n      },\n      __self: this\n    })))))));\n  }\n\n}\n\nexport default ChartRoom;","map":{"version":3,"sources":["/home/user/Desktop/milonux-sq-dashboard-59aefe7abad7/src/Personal/Layout/chart_room.js"],"names":["React","Component","useState","useEffect","Layout","Menu","Dropdown","Icon","Button","Avatar","Drawer","Input","Link","AppRouter","NotificationTab","ReactApexChart","$","Popper","isAbsolute","axios","Host","firebase","Config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","initializeApp","ChartRoom","constructor","props","selectUser","username","id","setState","msg_list","massage_box","select_username","received_id","sel_u_id","allMassageList","handleSendMassage","e","massage","refs","msg","value","newItem","user_Id","state","user_id","send_Id","received_Id","message","msg_Status","timestamp","database","ServerValue","TIMESTAMP","messageSend","push","online","user_list","userName","send_msg_list","received_list","send_id","text","user_text","user_state","user_Name","user_Email","massage_List","ref","child","userStatus","allUserStatus","componentWillMount","profile_data","JSON","parse","sessionStorage","getItem","loadAllUserList","promise","post","loginURL","email","status","users_list","data","users","handleKeyPress","event","key","handleChange","target","on","val","i","console","log","u_list","Object","values","keys","length","s_id","m_list","rsm_list","re_data","render","map","index","marginLeft","bind"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,EAAqCC,SAArC,QAAuD,OAAvD;AACA,SAASC,MAAT,EAAiBC,IAAjB,EAAuBC,QAAvB,EAAiCC,IAAjC,EAAuCC,MAAvC,EAA+CC,MAA/C,EAAuDC,MAAvD,EAA+DC,KAA/D,QAA4E,MAA5E;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,OAAOC,SAAP,MAAsB,cAAtB;AACA,SAASC,eAAT,QAAgC,sBAAhC;AACA,OAAO,mBAAP;AACA,OAAOC,cAAP,MAA2B,kBAA3B;AACA,OAAO,sCAAP;AACA,OAAOC,CAAP,MAAc,QAAd;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,OAAO,wCAAP;AACA,SAASC,UAAT,QAA2B,MAA3B;AACA,OAAO,YAAP;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,IAAT,QAAsB,YAAtB;AACA,OAAOC,QAAP,MAAqB,UAArB;AAEA,MAAMC,MAAM,GAAG;AACbC,EAAAA,MAAM,EAAE,yCADK;AAEbC,EAAAA,UAAU,EAAE,6BAFC;AAGbC,EAAAA,WAAW,EAAE,oCAHA;AAIbC,EAAAA,SAAS,EAAE,aAJE;AAKbC,EAAAA,aAAa,EAAE,yBALF;AAMbC,EAAAA,iBAAiB,EAAE,cANN;AAObC,EAAAA,KAAK,EAAE,2CAPM;AAQbC,EAAAA,aAAa,EAAE;AARF,CAAf;AAWAT,QAAQ,CAACU,aAAT,CAAuBT,MAAvB;;AAGA,MAAMU,SAAN,SAAwB/B,SAAxB,CAAkC;AAChCgC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAwDrBC,UAxDqB,GAwDR,CAACC,QAAD,EAAWC,EAAX,KAAkB;AAC3B,WAAKC,QAAL,CAAc;AAACC,QAAAA,QAAQ,EAAC;AAAV,OAAd;AACA,WAAKD,QAAL,CAAc;AAACE,QAAAA,WAAW,EAAC;AAAb,OAAd;AACA,WAAKF,QAAL,CAAc;AAACG,QAAAA,eAAe,EAACL;AAAjB,OAAd;AACA,WAAKE,QAAL,CAAc;AAACI,QAAAA,WAAW,EAACL;AAAb,OAAd;AACA,WAAKC,QAAL,CAAc;AAACK,QAAAA,QAAQ,EAACN;AAAV,OAAd;AACA,WAAKO,cAAL,CAAoBP,EAApB;AAGD,KAjEkB;;AAAA,SAoEnBQ,iBApEmB,GAoEEC,CAAD,IAAO;AACxB,WAAKR,QAAL,CAAc;AAACS,QAAAA,OAAO,EAAC,KAAKC,IAAL,CAAUC,GAAV,CAAcC;AAAvB,OAAd;AACC,UAAIC,OAAO,GAAG;AACZC,QAAAA,OAAO,EAAC,KAAKC,KAAL,CAAWC,OADP;AAEZC,QAAAA,OAAO,EAAC,KAAKF,KAAL,CAAWC,OAFP;AAGZE,QAAAA,WAAW,EAAC,KAAKH,KAAL,CAAWX,WAHX;AAIZe,QAAAA,OAAO,EAAC,KAAKJ,KAAL,CAAWI,OAJP;AAKZC,QAAAA,UAAU,EAAC,IALC;AAMZC,QAAAA,SAAS,EAAGtC,QAAQ,CAACuC,QAAT,CAAkBC,WAAlB,CAA8BC;AAN9B,OAAd;AAQA,WAAKC,WAAL,CAAiBC,IAAjB,CAAsBb,OAAtB;AACA,WAAKb,QAAL,CAAc;AAAEmB,QAAAA,OAAO,EAAE;AAAX,OAAd;AAEH,KAjFkB;;AAEjB,SAAKJ,KAAL,GAAa;AACTY,MAAAA,MAAM,EAAC,KADE;AAETzB,MAAAA,WAAW,EAAC,KAFH;AAGTC,MAAAA,eAAe,EAAC,EAHP;AAITyB,MAAAA,SAAS,EAAC,EAJD;AAKTC,MAAAA,QAAQ,EAAC,OALA;AAMTb,MAAAA,OAAO,EAAC,EANC;AAOTX,MAAAA,QAAQ,EAAC,EAPA;AAQTyB,MAAAA,aAAa,EAAC,EARL;AASTC,MAAAA,aAAa,EAAC,EATL;AAUTC,MAAAA,OAAO,EAAC,EAVC;AAWT5B,MAAAA,WAAW,EAAC,EAXH;AAYT6B,MAAAA,IAAI,EAAC,cAZI;AAaTC,MAAAA,SAAS,EAAC,OAbD;AAcTC,MAAAA,UAAU,EAAC,EAdF;AAeTxB,MAAAA,GAAG,EAAC,EAfK;AAgBTQ,MAAAA,OAAO,EAAC,EAhBC;AAiBTiB,MAAAA,SAAS,EAAC,EAjBD;AAkBTC,MAAAA,UAAU,EAAC,EAlBF;AAmBTC,MAAAA,YAAY,EAAC,EAnBJ;AAoBTrC,MAAAA,QAAQ,EAAC,CAAC;AAAC,mBAAU;AAAX,OAAD;AApBA,KAAb;AAsBA,SAAKwB,WAAL,GAAmB1C,QAAQ,CAACuC,QAAT,GAAoBiB,GAApB,GAA0BC,KAA1B,CAAgC,cAAc,KAAKzB,KAAL,CAAWkB,IAAzD,CAAnB;AACA,SAAK3B,cAAL;AAEA,SAAKmC,UAAL,GAAkB1D,QAAQ,CAACuC,QAAT,GAAoBiB,GAApB,GAA0BC,KAA1B,CAAgC,cAAc,KAAKzB,KAAL,CAAWmB,SAAzD,CAAlB;AACA,SAAKQ,aAAL;AAGD;;AAEHC,EAAAA,kBAAkB,GAAG;AACjB,QAAIC,YAAY,GAAGC,IAAI,CAACC,KAAL,CAAWC,cAAc,CAACC,OAAf,CAAuB,cAAvB,CAAX,CAAnB;AACA,SAAKhD,QAAL,CAAc;AAACoC,MAAAA,SAAS,EAACQ,YAAY,CAAC,UAAD;AAAvB,KAAd;AACA,SAAK5C,QAAL,CAAc;AAACqC,MAAAA,UAAU,EAACO,YAAY,CAAC,OAAD;AAAxB,KAAd;AACA,SAAKK,eAAL;AACA,SAAKjD,QAAL,CAAc;AAACgB,MAAAA,OAAO,EAAC4B,YAAY,CAAC,SAAD;AAArB,KAAd;AACH;;AAED,QAAMK,eAAN,GACE;AACE,SAAKjD,QAAL,CAAc;AAAC4B,MAAAA,SAAS,EAAC;AAAX,KAAd;AACA,QAAIgB,YAAY,GAAGC,IAAI,CAACC,KAAL,CAAWC,cAAc,CAACC,OAAf,CAAuB,cAAvB,CAAX,CAAnB;AACA,UAAME,OAAO,GAAG,MAAMrE,KAAK,CAACsE,IAAN,CAAWrE,IAAI,CAACsE,QAAL,GAAe,gBAA1B,EAA4C;AAACtD,MAAAA,QAAQ,EAAC8C,YAAY,CAAC,UAAD,CAAtB;AACFS,MAAAA,KAAK,EAACT,YAAY,CAAC,OAAD;AADhB,KAA5C,CAAtB;AAEA,UAAMU,MAAM,GAAGJ,OAAO,CAACI,MAAvB;;AACA,QAAGA,MAAM,KAAG,GAAZ,EACA;AACE,YAAMC,UAAU,GAAEL,OAAO,CAACM,IAAR,CAAaC,KAA/B;AACA,WAAKzD,QAAL,CAAc;AAAC4B,QAAAA,SAAS,EAAC2B;AAAX,OAAd;AACD;AACF;;AA8BDG,EAAAA,cAAc,CAACC,KAAD,EAAQ;AACpB,QAAIA,KAAK,CAACC,GAAN,KAAc,OAAlB,EAA2B;AAC3B,SAAKrD,iBAAL;AACD;;AAEDsD,EAAAA,YAAY,CAACF,KAAD,EAAQ;AAClB,SAAK3D,QAAL,CAAc;AAACmB,MAAAA,OAAO,EAAEwC,KAAK,CAACG,MAAN,CAAalD;AAAvB,KAAd;AACD;;AAEH8B,EAAAA,aAAa,GAAG;AAEhB,SAAKD,UAAL,CAAgBsB,EAAhB,CAAmB,OAAnB,EAA4B5C,OAAO,IAAI;AAChC,UAAKA,OAAO,CAAC6C,GAAR,MAAiB,IAAtB,EAA2B;AACxB,YAAIC,CAAJ;AACA,YAAIR,KAAK,GAAG,KAAK1C,KAAL,CAAWa,SAAvB;AACAsC,QAAAA,OAAO,CAACC,GAAR,CAAYV,KAAZ;AACA,YAAIW,MAAM,GAAGC,MAAM,CAACC,MAAP,CAAcnD,OAAO,CAAC6C,GAAR,EAAd,CAAb;;AACA,aAAKC,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGI,MAAM,CAACE,IAAP,CAAYH,MAAZ,EAAoBI,MAApC,EAA4CP,CAAC,EAA7C,EAAiD;AAC/C,eAAIA,CAAC,GAAG,CAAR,EAAWA,CAAC,GAAGI,MAAM,CAACE,IAAP,CAAYd,KAAZ,EAAmBe,MAAlC,EAA0CP,CAAC,EAA3C,EAA8C;AAC1C,gBAAGR,KAAK,CAACQ,CAAD,CAAL,CAAS,IAAT,KAAkB,CAArB,EAAuB;AACnB,kBAAIG,MAAM,CAACH,CAAD,CAAN,CAAU,aAAV,KAA2B,QAA/B,EAAwC;AACpCR,gBAAAA,KAAK,CAAC,KAAD,CAAL,GAAe,QAAf;AACH,eAFD,MAGI;AACAA,gBAAAA,KAAK,CAAC,KAAD,CAAL,GAAe,SAAf;AAEH;AAEJ;AAEJ;AAEJ;;AACD,aAAKzD,QAAL,CAAc;AACZmC,UAAAA,UAAU,EAACiC;AADC,SAAd;AAGA,OAxBD,MAyBI;AACL,aAAKpE,QAAL,CAAc;AACVmC,UAAAA,UAAU,EAAC;AADD,SAAd;AAEE;AACH,KA9BL;AAgCC;;AAID,QAAM7B,cAAN,CAAqBP,EAArB,EAAwB;AACjB,UAAM0E,IAAI,GAAG1E,EAAb;AACA,SAAKY,GAAL,GAAW5B,QAAQ,CAACuC,QAAT,GAAoBiB,GAApB,GAA0BC,KAA1B,CAAgC,cAAc,KAAKzB,KAAL,CAAWkB,IAAzD,EAA+D8B,EAA/D,CAAkE,OAAlE,EAA2E5C,OAAO,IAAI;AAC5F,UAAKA,OAAO,CAAC6C,GAAR,MAAiB,IAAtB,EAA2B;AACzB,YAAIC,CAAJ;AACA,YAAIS,MAAM,GAAG,EAAb;AACA,YAAIC,QAAQ,GAAGN,MAAM,CAACC,MAAP,CAAcnD,OAAO,CAAC6C,GAAR,EAAd,CAAf;;AACA,aAAKC,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGI,MAAM,CAACE,IAAP,CAAYI,QAAZ,EAAsBH,MAAtC,EAA8CP,CAAC,EAA/C,EAAmD;AACjD,cAAI,KAAKlD,KAAL,CAAWC,OAAX,IAAsB2D,QAAQ,CAACV,CAAD,CAAR,CAAY,aAAZ,CAAvB,IAAuD,KAAKlD,KAAL,CAAWC,OAAX,IAAsB2D,QAAQ,CAACV,CAAD,CAAR,CAAY,SAAZ,CAAhF,EAAwG;AAClG,gBAAIW,OAAO,GAAGD,QAAQ,CAACV,CAAD,CAAtB;AACAS,YAAAA,MAAM,CAAChD,IAAP,CAAYkD,OAAZ;AACL;;AACF,eAAK5E,QAAL,CAAc;AAACC,YAAAA,QAAQ,EAACyE;AAAV,WAAd;AACA;AACF,OAXD,MAYI;AACA,aAAK1E,QAAL,CAAc;AAAEC,UAAAA,QAAQ,EAAC;AAAX,SAAd;AACH;AACL,KAhBU,CAAX;AAiBN;;AAMC4E,EAAAA,MAAM,GAAG;AAEP,WACA;AAAK,MAAA,KAAK,EAAC,WAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,KAAK,EAAC,WAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,KAAK,EAAC,cAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACL;AAAK,MAAA,KAAK,EAAC,cAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACD;AAAK,MAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,CADC,EAID;AAAK,MAAA,KAAK,EAAC,UAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,KAAK,EAAC,qBAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACD;AAAO,MAAA,IAAI,EAAC,MAAZ;AAAmB,MAAA,KAAK,EAAC,YAAzB;AAAuC,MAAA,WAAW,EAAC,QAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADC,CADF,CAJC,CADK,EAaL;AAAK,MAAA,KAAK,EAAC,mBAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC,KAAK9D,KAAL,CAAWa,SAAX,CAAqBkD,GAArB,CAAyB,CAAClE,KAAD,EAAQmE,KAAR,KAC3B;AAAK,MAAA,KAAK,EAAC,uBAAX;AAAqC,MAAA,GAAG,EAAEA,KAA1C;AAAiD,MAAA,OAAO,EAAE,MAAI,KAAKlF,UAAL,CAAgBe,KAAK,CAACd,QAAtB,EAAgCc,KAAK,CAACb,EAAtC,CAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,KAAK,EAAC,aAAX;AAAyB,MAAA,KAAK,EAAE,KAAKgB,KAAL,CAAWZ,eAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACQ;AAAK,MAAA,GAAG,EAAC,kDAAT;AAA4D,MAAA,GAAG,EAAC,OAAhE;AAAwE,MAAA,KAAK,EAAC,UAA9E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADR,EAED;AAAK,MAAA,KAAK,EAAC,SAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAI,MAAA,KAAK,EAAES,KAAK,CAACb,EAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAsBa,KAAK,CAACd,QAA5B,OAAuCc,KAAK,CAACb,EAA7C,EAEA;AAAM,MAAA,KAAK,EAAC,QAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFA,CADF,EAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCANF,CAFC,CADF,CADE,CADD,CAbK,CADF,EAmCE;AAAK,MAAA,KAAK,EAAC,OAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAK,MAAA,KAAK,EAAC,kCAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAQ,MAAA,KAAK,EAAE;AAACiF,QAAAA,UAAU,EAAC;AAAZ,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAqC,KAAKjE,KAAL,CAAWZ,eAAhD,CADF,EAEC;AAAK,MAAA,GAAG,EAAC,kDAAT;AAA4D,MAAA,GAAG,EAAC,OAAhE;AAAwE,MAAA,KAAK,EAAC,WAA9E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFD,CADA,EAMC,KAAKY,KAAL,CAAWb,WAAX,IAA0B,IAA1B,GACC;AAAK,MAAA,KAAK,EAAC,aAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACQ;AAAK,MAAA,KAAK,EAAC,cAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACS,KAAKa,KAAL,CAAWd,QAAX,CAAoB6E,GAApB,CAAwB,CAAClE,KAAD,EAAQmE,KAAR,KACrB;AAAK,MAAA,KAAK,EAAC,cAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC,KAAKhE,KAAL,CAAWV,QAAX,IAAuBO,KAAK,CAACK,OAA7B,GACC;AAAK,MAAA,KAAK,EAAC,oBAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAG,MAAA,GAAG,EAAE8D,KAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAgBnE,KAAK,CAACO,OAAtB,MADJ,EAEE;AAAM,MAAA,KAAK,EAAC,WAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CADD,GAIU,IALX,EAOK,KAAKJ,KAAL,CAAWV,QAAX,IAAuBO,KAAK,CAACM,WAA7B,GACD;AAAK,MAAA,KAAK,EAAC,cAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACM;AAAK,MAAA,KAAK,EAAC,UAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAG,MAAA,GAAG,EAAE6D,KAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAgBnE,KAAK,CAACO,OAAtB,MADA,EAEA;AAAM,MAAA,KAAK,EAAC,WAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFA,CADN,CADC,GAMM,IAbX,CADH,CADT,CADR,CADD,GAuBU;AAAI,MAAA,KAAK,EAAC,aAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCA7BX,EAgCE;AAAK,MAAA,KAAK,EAAC,UAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,KAAK,EAAC,iBAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAO,MAAA,IAAI,EAAC,MAAZ;AAAoB,MAAA,GAAG,EAAC,KAAxB;AAA8B,MAAA,KAAK,EAAC,WAApC;AAAgD,MAAA,WAAW,EAAC,gBAA5D;AACgC,MAAA,KAAK,EAAE,KAAKJ,KAAL,CAAWI,OADlD;AAEgC,MAAA,UAAU,EAAE,KAAKuC,cAAL,CAAoBuB,IAApB,CAAyB,IAAzB,CAF5C;AAGgC,MAAA,QAAQ,EAAE,KAAKpB,YAAL,CAAkBoB,IAAlB,CAAuB,IAAvB,CAH1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAKE;AAAQ,MAAA,KAAK,EAAC,cAAd;AAA6B,MAAA,IAAI,EAAC,QAAlC;AAA2C,MAAA,OAAO,EAAE,KAAK1E,iBAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACsB;AAAG,MAAA,KAAK,EAAC,mBAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADtB,CALF,CADF,CAhCF,CAnCF,CADF,CADA;AAqFD;;AAnP+B;;AAsPlC,eAAeb,SAAf","sourcesContent":["import React, { Component, useState, useEffect }  from \"react\";\nimport { Layout, Menu, Dropdown, Icon, Button, Avatar, Drawer, Input } from \"antd\";\nimport { Link } from \"react-router-dom\";\nimport AppRouter from \"../../router\";\nimport { NotificationTab } from \"../components/Header\";\nimport \"./PageLayout.scss\";\nimport ReactApexChart from 'react-apexcharts'\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport $ from 'jquery';\nimport Popper from 'popper.js';\nimport 'bootstrap/dist/js/bootstrap.bundle.min';\nimport { isAbsolute } from \"path\";\nimport \"./chat.css\"\nimport axios from \"axios\";\nimport { Host } from  \"../../Host\";\nimport firebase from 'firebase';\n\nconst Config = {\n  apiKey: \"AIzaSyB5fOOl4b5DpbBhaeXAL-61qkpJoENQeTY\",\n  authDomain: \"sqd-project.firebaseapp.com\",\n  databaseURL: \"https://sqd-project.firebaseio.com\",\n  projectId: \"sqd-project\",\n  storageBucket: \"sqd-project.appspot.com\",\n  messagingSenderId: \"727802836038\",\n  appId: \"1:727802836038:web:44732927a6e01d5abdc647\",\n  measurementId: \"G-YVGMP4HC63\"\n};\n\nfirebase.initializeApp(Config);\n\n\nclass ChartRoom extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n        online:false,\n        massage_box:false,\n        select_username:'',\n        user_list:[],\n        userName:'Vamsi',\n        user_id:'',\n        sel_u_id:'',\n        send_msg_list:[],\n        received_list:[],\n        send_id:'',\n        received_id:'',\n        text:'sqd_massages',\n        user_text:'users',\n        user_state:'',\n        msg:'',\n        message:'',\n        user_Name:'',\n        user_Email:'',\n        massage_List:'',\n        msg_list:[{'massage':'hi'}]\n    }\n    this.messageSend = firebase.database().ref().child('messages/' + this.state.text);\n    this.allMassageList();\n\n    this.userStatus = firebase.database().ref().child('messages/' + this.state.user_text);\n    this.allUserStatus();\n\n\n  }\n\ncomponentWillMount() {\n    var profile_data = JSON.parse(sessionStorage.getItem(\"session_data\"));\n    this.setState({user_Name:profile_data['username']});\n    this.setState({user_Email:profile_data['email']});\n    this.loadAllUserList()\n    this.setState({user_id:profile_data['user_id']});\n}\n\nasync loadAllUserList()\n  {\n    this.setState({user_list:[]});\n    var profile_data = JSON.parse(sessionStorage.getItem(\"session_data\"));\n    const promise = await axios.post(Host.loginURL +\"/chat_user_api\", {username:profile_data['username'],\n                                                                    email:profile_data['email']});\n    const status = promise.status;\n    if(status===200)\n    {\n      const users_list= promise.data.users;\n      this.setState({user_list:users_list});\n    }\n  }\n\n\nselectUser = (username, id) => {\n    this.setState({msg_list:[]});\n    this.setState({massage_box:true});\n    this.setState({select_username:username});\n    this.setState({received_id:id});\n    this.setState({sel_u_id:id});\n    this.allMassageList(id);\n\n\n  };\n\n\n  handleSendMassage = (e) => {\n     this.setState({massage:this.refs.msg.value})\n      var newItem = {\n        user_Id:this.state.user_id,\n        send_Id:this.state.user_id,\n        received_Id:this.state.received_id,\n        message:this.state.message,\n        msg_Status:true,\n        timestamp : firebase.database.ServerValue.TIMESTAMP\n      }\n      this.messageSend.push(newItem);\n      this.setState({ message: '' });\n\n  }\n\n  handleKeyPress(event) {\n    if (event.key !== 'Enter') return;\n    this.handleSendMassage();\n  }\n\n  handleChange(event) {\n    this.setState({message: event.target.value});\n  }\n\nallUserStatus() {\n\nthis.userStatus.on('value', message => {\n       if ( message.val() != null){\n          var i;\n          var users = this.state.user_list;\n          console.log(users)\n          var u_list = Object.values(message.val());\n          for (i = 0; i < Object.keys(u_list).length; i++) {\n            for(i = 0; i < Object.keys(users).length; i++){\n                if(users[i][\"id\"] == 1){\n                    if (u_list[i][\"user_status\"] =='online'){\n                        users['u_s'] = 'Online';\n                    }\n                    else{\n                        users['u_s'] = 'Offline';\n\n                    }\n\n                }\n\n            }\n\n        }\n        this.setState({\n          user_state:u_list\n        });\n       }\n       else{\n      this.setState({\n          user_state:[]});\n       }\n    });\n\n}\n\n\n\nasync allMassageList(id){\n       const s_id = id;\n       this.msg = firebase.database().ref().child('messages/' + this.state.text).on('value', message => {\n            if ( message.val() != null){\n              var i;\n              var m_list = []\n              var rsm_list = Object.values(message.val());\n              for (i = 0; i < Object.keys(rsm_list).length; i++) {\n                if((this.state.user_id == rsm_list[i]['received_Id']) || (this.state.user_id == rsm_list[i]['send_Id'])){\n                      var re_data = rsm_list[i]\n                      m_list.push(re_data)\n                }\n               this.setState({msg_list:m_list});\n              }\n            }\n            else{\n                this.setState({ msg_list:[]});\n            }\n       });\n}\n\n\n\n\n\n  render() {\n\n    return (\n    <div class=\"messaging\">\n      <div class=\"inbox_msg\">\n        <div class=\"inbox_people\">\n\t  <div class=\"headind_srch\">\n\t\t<div className=\"recent_heading\">\n\t\t  <h4>Users</h4>\n\t\t</div>\n\t\t<div class=\"srch_bar\">\n\t\t  <div class=\"stylish-input-group\">\n\t\t\t<input type=\"text\" class=\"search-bar\"  placeholder=\"Search\"  / >\n\t\t\t</div>\n\t\t</div>\n\t  </div>\n\n\n\t  <div class=\"inbox_chat scroll\">\n\t  {this.state.user_list.map((value, index) =>\n\t\t<div class=\"chat_list active_chat\"   key={index} onClick={()=>this.selectUser(value.username, value.id)}>\n\t\t  <div class=\"chat_people\" value={this.state.select_username}>\n            <img src=\"https://ptetutorials.com/images/user-profile.png\" alt=\"sunil\" class=\"chat_img\" />\n\t\t\t<div class=\"chat_ib\">\n\t\t\t  <h5 value={value.id}>{value.username} {value.id}\n\n\t\t\t  <span class=\"online\"></span>\n\n\t\t\t   </h5>\n\t\t\t  <p>new user for sq dashboard</p>\n\t\t\t</div>\n\t\t  </div>\n\t\t</div>\n        )}\n        </div>\n\t</div>\n\n\n\n        <div class=\"mesgs\">\n        <div class=\"alert alert-success  select_user\">\n          <strong style={{marginLeft:\"19px\"}}>{this.state.select_username}</strong >\n         <img src=\"https://ptetutorials.com/images/user-profile.png\" alt=\"sunil\" class=\"hear_user\" />\n          </div>\n\n        {this.state.massage_box == true?\n          <div class=\"msg_history\">\n                  <div class=\"incoming_msg\">\n                         { this.state.msg_list.map((value, index) =>\n                              <div class=\"received_msg\">\n                              {this.state.sel_u_id == value.send_Id?\n                                <div class=\"received_withd_msg\">\n                                    <p key={index}>{value.message} </p>\n                                  <span class=\"time_date\"></span>\n                                  </div>:null\n                                  }\n                                  {this.state.sel_u_id == value.received_Id?\n                                  <div class=\"outgoing_msg\">\n                                        <div class=\"sent_msg\">\n                                        <p key={index}>{value.message} </p>\n                                        <span class=\"time_date\"></span>\n                                        </div>\n                                  </div>:null\n                               }\n                              </div>\n                          )}\n                        </div>\n\n            </div>:<h2 class=\"msg_history\"> welcome Message Chatting</h2>\n          }\n\n          <div class=\"type_msg\">\n            <div class=\"input_msg_write\">\n              <input type=\"text\"  ref='msg' class=\"write_msg\" placeholder=\"Type a message\"\n                                              value={this.state.message}\n                                              onKeyPress={this.handleKeyPress.bind(this)}\n                                              onChange={this.handleChange.bind(this)}/>\n              <button class=\"msg_send_btn\" type=\"button\" onClick={this.handleSendMassage}>\n                                    <i class=\"fa fa-paper-plane\"></i></button>\n            </div>\n          </div>\n\n        </div>\n  </div>\n</div>\n\n    );\n  }\n}\n\nexport default ChartRoom;\n"]},"metadata":{},"sourceType":"module"}