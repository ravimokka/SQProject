{"ast":null,"code":"/**\n* Copyright 2012-2019, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar Fx = require('../../components/fx');\n\nvar Lib = require('../../lib');\n\nvar Axes = require('../../plots/cartesian/axes');\n\nvar extractOpts = require('../../components/colorscale').extractOpts;\n\nmodule.exports = function hoverPoints(pointData, xval, yval, hovermode, hoverLayer, contour) {\n  var cd0 = pointData.cd[0];\n  var trace = cd0.trace;\n  var xa = pointData.xa;\n  var ya = pointData.ya;\n  var x = cd0.x;\n  var y = cd0.y;\n  var z = cd0.z;\n  var xc = cd0.xCenter;\n  var yc = cd0.yCenter;\n  var zmask = cd0.zmask;\n  var zhoverformat = trace.zhoverformat;\n  var x2 = x;\n  var y2 = y;\n  var xl, yl, nx, ny;\n\n  if (pointData.index !== false) {\n    try {\n      nx = Math.round(pointData.index[1]);\n      ny = Math.round(pointData.index[0]);\n    } catch (e) {\n      Lib.error('Error hovering on heatmap, ' + 'pointNumber must be [row,col], found:', pointData.index);\n      return;\n    }\n\n    if (nx < 0 || nx >= z[0].length || ny < 0 || ny > z.length) {\n      return;\n    }\n  } else if (Fx.inbox(xval - x[0], xval - x[x.length - 1], 0) > 0 || Fx.inbox(yval - y[0], yval - y[y.length - 1], 0) > 0) {\n    return;\n  } else {\n    if (contour) {\n      var i2;\n      x2 = [2 * x[0] - x[1]];\n\n      for (i2 = 1; i2 < x.length; i2++) {\n        x2.push((x[i2] + x[i2 - 1]) / 2);\n      }\n\n      x2.push([2 * x[x.length - 1] - x[x.length - 2]]);\n      y2 = [2 * y[0] - y[1]];\n\n      for (i2 = 1; i2 < y.length; i2++) {\n        y2.push((y[i2] + y[i2 - 1]) / 2);\n      }\n\n      y2.push([2 * y[y.length - 1] - y[y.length - 2]]);\n    }\n\n    nx = Math.max(0, Math.min(x2.length - 2, Lib.findBin(xval, x2)));\n    ny = Math.max(0, Math.min(y2.length - 2, Lib.findBin(yval, y2)));\n  }\n\n  var x0 = xa.c2p(x[nx]);\n  var x1 = xa.c2p(x[nx + 1]);\n  var y0 = ya.c2p(y[ny]);\n  var y1 = ya.c2p(y[ny + 1]);\n\n  if (contour) {\n    x1 = x0;\n    xl = x[nx];\n    y1 = y0;\n    yl = y[ny];\n  } else {\n    xl = xc ? xc[nx] : (x[nx] + x[nx + 1]) / 2;\n    yl = yc ? yc[ny] : (y[ny] + y[ny + 1]) / 2;\n    if (xa && xa.type === 'category') xl = x[nx];\n    if (ya && ya.type === 'category') yl = y[ny];\n\n    if (trace.zsmooth) {\n      x0 = x1 = xa.c2p(xl);\n      y0 = y1 = ya.c2p(yl);\n    }\n  }\n\n  var zVal = z[ny][nx];\n  if (zmask && !zmask[ny][nx]) zVal = undefined;\n  if (zVal === undefined && !trace.hoverongaps) return;\n  var text;\n\n  if (Array.isArray(cd0.hovertext) && Array.isArray(cd0.hovertext[ny])) {\n    text = cd0.hovertext[ny][nx];\n  } else if (Array.isArray(cd0.text) && Array.isArray(cd0.text[ny])) {\n    text = cd0.text[ny][nx];\n  } // dummy axis for formatting the z value\n\n\n  var cOpts = extractOpts(trace);\n  var dummyAx = {\n    type: 'linear',\n    range: [cOpts.min, cOpts.max],\n    hoverformat: zhoverformat,\n    _separators: xa._separators,\n    _numFormat: xa._numFormat\n  };\n  var zLabel = Axes.tickText(dummyAx, zVal, 'hover').text;\n  return [Lib.extendFlat(pointData, {\n    index: [ny, nx],\n    // never let a 2D override 1D type as closest point\n    distance: pointData.maxHoverDistance,\n    spikeDistance: pointData.maxSpikeDistance,\n    x0: x0,\n    x1: x1,\n    y0: y0,\n    y1: y1,\n    xLabelVal: xl,\n    yLabelVal: yl,\n    zLabelVal: zVal,\n    zLabel: zLabel,\n    text: text\n  })];\n};","map":{"version":3,"sources":["/home/user/Desktop/milonux-sq-dashboard-59aefe7abad7/node_modules/plotly.js/src/traces/heatmap/hover.js"],"names":["Fx","require","Lib","Axes","extractOpts","module","exports","hoverPoints","pointData","xval","yval","hovermode","hoverLayer","contour","cd0","cd","trace","xa","ya","x","y","z","xc","xCenter","yc","yCenter","zmask","zhoverformat","x2","y2","xl","yl","nx","ny","index","Math","round","e","error","length","inbox","i2","push","max","min","findBin","x0","c2p","x1","y0","y1","type","zsmooth","zVal","undefined","hoverongaps","text","Array","isArray","hovertext","cOpts","dummyAx","range","hoverformat","_separators","_numFormat","zLabel","tickText","extendFlat","distance","maxHoverDistance","spikeDistance","maxSpikeDistance","xLabelVal","yLabelVal","zLabelVal"],"mappings":"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","sourcesContent":["/**\n* Copyright 2012-2019, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n\n'use strict';\n\nvar Fx = require('../../components/fx');\nvar Lib = require('../../lib');\nvar Axes = require('../../plots/cartesian/axes');\nvar extractOpts = require('../../components/colorscale').extractOpts;\n\nmodule.exports = function hoverPoints(pointData, xval, yval, hovermode, hoverLayer, contour) {\n    var cd0 = pointData.cd[0];\n    var trace = cd0.trace;\n    var xa = pointData.xa;\n    var ya = pointData.ya;\n    var x = cd0.x;\n    var y = cd0.y;\n    var z = cd0.z;\n    var xc = cd0.xCenter;\n    var yc = cd0.yCenter;\n    var zmask = cd0.zmask;\n    var zhoverformat = trace.zhoverformat;\n    var x2 = x;\n    var y2 = y;\n\n    var xl, yl, nx, ny;\n\n    if(pointData.index !== false) {\n        try {\n            nx = Math.round(pointData.index[1]);\n            ny = Math.round(pointData.index[0]);\n        } catch(e) {\n            Lib.error('Error hovering on heatmap, ' +\n                'pointNumber must be [row,col], found:', pointData.index);\n            return;\n        }\n        if(nx < 0 || nx >= z[0].length || ny < 0 || ny > z.length) {\n            return;\n        }\n    } else if(Fx.inbox(xval - x[0], xval - x[x.length - 1], 0) > 0 ||\n            Fx.inbox(yval - y[0], yval - y[y.length - 1], 0) > 0) {\n        return;\n    } else {\n        if(contour) {\n            var i2;\n            x2 = [2 * x[0] - x[1]];\n\n            for(i2 = 1; i2 < x.length; i2++) {\n                x2.push((x[i2] + x[i2 - 1]) / 2);\n            }\n            x2.push([2 * x[x.length - 1] - x[x.length - 2]]);\n\n            y2 = [2 * y[0] - y[1]];\n            for(i2 = 1; i2 < y.length; i2++) {\n                y2.push((y[i2] + y[i2 - 1]) / 2);\n            }\n            y2.push([2 * y[y.length - 1] - y[y.length - 2]]);\n        }\n        nx = Math.max(0, Math.min(x2.length - 2, Lib.findBin(xval, x2)));\n        ny = Math.max(0, Math.min(y2.length - 2, Lib.findBin(yval, y2)));\n    }\n\n    var x0 = xa.c2p(x[nx]);\n    var x1 = xa.c2p(x[nx + 1]);\n    var y0 = ya.c2p(y[ny]);\n    var y1 = ya.c2p(y[ny + 1]);\n\n    if(contour) {\n        x1 = x0;\n        xl = x[nx];\n        y1 = y0;\n        yl = y[ny];\n    } else {\n        xl = xc ? xc[nx] : ((x[nx] + x[nx + 1]) / 2);\n        yl = yc ? yc[ny] : ((y[ny] + y[ny + 1]) / 2);\n\n        if(xa && xa.type === 'category') xl = x[nx];\n        if(ya && ya.type === 'category') yl = y[ny];\n\n        if(trace.zsmooth) {\n            x0 = x1 = xa.c2p(xl);\n            y0 = y1 = ya.c2p(yl);\n        }\n    }\n\n    var zVal = z[ny][nx];\n    if(zmask && !zmask[ny][nx]) zVal = undefined;\n\n    if(zVal === undefined && !trace.hoverongaps) return;\n\n    var text;\n    if(Array.isArray(cd0.hovertext) && Array.isArray(cd0.hovertext[ny])) {\n        text = cd0.hovertext[ny][nx];\n    } else if(Array.isArray(cd0.text) && Array.isArray(cd0.text[ny])) {\n        text = cd0.text[ny][nx];\n    }\n\n    // dummy axis for formatting the z value\n    var cOpts = extractOpts(trace);\n    var dummyAx = {\n        type: 'linear',\n        range: [cOpts.min, cOpts.max],\n        hoverformat: zhoverformat,\n        _separators: xa._separators,\n        _numFormat: xa._numFormat\n    };\n    var zLabel = Axes.tickText(dummyAx, zVal, 'hover').text;\n\n    return [Lib.extendFlat(pointData, {\n        index: [ny, nx],\n        // never let a 2D override 1D type as closest point\n        distance: pointData.maxHoverDistance,\n        spikeDistance: pointData.maxSpikeDistance,\n        x0: x0,\n        x1: x1,\n        y0: y0,\n        y1: y1,\n        xLabelVal: xl,\n        yLabelVal: yl,\n        zLabelVal: zVal,\n        zLabel: zLabel,\n        text: text\n    })];\n};\n"]},"metadata":{},"sourceType":"script"}