{"ast":null,"code":"import _regeneratorRuntime from\"/home/user/Desktop/milonux-sq-dashboard-59aefe7abad7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _classCallCheck from\"/home/user/Desktop/milonux-sq-dashboard-59aefe7abad7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/user/Desktop/milonux-sq-dashboard-59aefe7abad7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/user/Desktop/milonux-sq-dashboard-59aefe7abad7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/user/Desktop/milonux-sq-dashboard-59aefe7abad7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/user/Desktop/milonux-sq-dashboard-59aefe7abad7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component,useState,useEffect}from\"react\";import{Layout,Menu,Dropdown,Icon,Button,Avatar,Drawer,Input}from\"antd\";import AppRouter from\"../../router\";import{NotificationTab}from\"../components/Header\";import\"./PageLayout.scss\";import ReactApexChart from'react-apexcharts';import'bootstrap/dist/css/bootstrap.min.css';import $ from'jquery';import Popper from'popper.js';import'bootstrap/dist/js/bootstrap.bundle.min';import{isAbsolute}from\"path\";import*as styles from\"./chat.scss\";import axios from\"axios\";import{Host}from\"../../Host\";import firebase from'firebase';var Config_chat={apiKey:\"AIzaSyB5fOOl4b5DpbBhaeXAL-61qkpJoENQeTY\",authDomain:\"sqd-project.firebaseapp.com\",databaseURL:\"https://sqd-project.firebaseio.com\",projectId:\"sqd-project\",storageBucket:\"sqd-project.appspot.com\",messagingSenderId:\"727802836038\",appId:\"1:727802836038:web:44732927a6e01d5abdc647\",measurementId:\"G-YVGMP4HC63\"};firebase.initializeApp(Config_chat);var ChartRoom=/*#__PURE__*/function(_Component){_inherits(ChartRoom,_Component);function ChartRoom(props){var _this;_classCallCheck(this,ChartRoom);_this=_possibleConstructorReturn(this,_getPrototypeOf(ChartRoom).call(this,props));_this.selectUser=function(username,id){_this.setState({msg_list:[]});_this.setState({massage_box:true});_this.setState({select_username:username});_this.setState({received_id:id});_this.setState({sel_u_id:id});_this.allMassageList(id);};_this.handleSendMassage=function(e){_this.setState({massage:_this.refs.msg.value});var newItem={user_Id:_this.state.user_id,send_Id:_this.state.user_id,received_Id:_this.state.received_id,message:_this.state.message,msg_Status:true,timestamp:firebase.database.ServerValue.TIMESTAMP};_this.messageSend.push(newItem);_this.setState({message:''});};_this.state={online:false,massage_box:false,select_username:'',user_list:[],userName:'Vamsi',user_id:'',sel_u_id:'',send_msg_list:[],received_list:[],send_id:'',received_id:'',text:'sqd_massages',user_text:'users',user_state:'',msg:'',message:'',user_Name:'',user_Email:'',massage_List:'',msg_list:[{'massage':'hi'}]};_this.messageSend=firebase.database().ref().child('messages/'+_this.state.text);_this.allMassageList();return _this;}_createClass(ChartRoom,[{key:\"componentWillMount\",value:function componentWillMount(){var profile_data=JSON.parse(sessionStorage.getItem(\"session_data\"));this.setState({user_Name:profile_data['username']});this.setState({user_Email:profile_data['email']});this.loadAllUserList();this.setState({user_id:profile_data['user_id']});}},{key:\"loadAllUserList\",value:function loadAllUserList(){var profile_data,promise,status,users_list;return _regeneratorRuntime.async(function loadAllUserList$(_context){while(1){switch(_context.prev=_context.next){case 0:this.setState({user_list:[]});profile_data=JSON.parse(sessionStorage.getItem(\"session_data\"));_context.next=4;return _regeneratorRuntime.awrap(axios.post(Host.loginURL+\"/chat_user_api\",{username:profile_data['username'],email:profile_data['email']}));case 4:promise=_context.sent;status=promise.status;if(status===200){users_list=promise.data.users;this.setState({user_list:users_list});}case 7:case\"end\":return _context.stop();}}},null,this);}},{key:\"handleKeyPress\",value:function handleKeyPress(event){if(event.key!=='Enter')return;this.handleSendMassage();}},{key:\"handleChange\",value:function handleChange(event){this.setState({message:event.target.value});}},{key:\"allMassageList\",value:function allMassageList(id){var _this2=this;var s_id;return _regeneratorRuntime.async(function allMassageList$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:s_id=id;this.msg=firebase.database().ref().child('messages/'+this.state.text).on('value',function(message){if(message.val()!=null){var i;var m_list=[];var rsm_list=Object.values(message.val());for(i=0;i<Object.keys(rsm_list).length;i++){if(_this2.state.user_id==rsm_list[i]['received_Id']||_this2.state.user_id==rsm_list[i]['send_Id']){var re_data=rsm_list[i];m_list.push(re_data);}_this2.setState({msg_list:m_list});}}else{_this2.setState({msg_list:[]});}});case 2:case\"end\":return _context2.stop();}}},null,this);}},{key:\"render\",value:function render(){var _this3=this;return React.createElement(\"div\",{className:\"messaging\"},React.createElement(\"div\",{className:\"inbox_msg\"},React.createElement(\"div\",{className:\"inbox_people\"},React.createElement(\"div\",{className:\"headind_srch\"},React.createElement(\"div\",{className:\"recent_heading\"},React.createElement(\"h4\",null,\"Users\")),React.createElement(\"div\",{className:\"srch_bar\"},React.createElement(\"div\",{className:\"stylish-input-group\"},React.createElement(\"input\",{type:\"text\",className:\"search-bar\",placeholder:\"Search\"})))),React.createElement(\"div\",{className:\"inbox_chat scroll\"},this.state.user_list.map(function(value,index){return React.createElement(\"div\",{className:\"chat_list active_chat\",key:index,onClick:function onClick(){return _this3.selectUser(value.username,value.id);}},React.createElement(\"div\",{className:\"chat_people\",value:_this3.state.select_username},React.createElement(\"img\",{src:\"https://ptetutorials.com/images/user-profile.png\",alt:\"sunil\",className:\"chat_img\"}),React.createElement(\"div\",{className:\"chat_ib\"},React.createElement(\"h5\",{value:value.id},value.username,\" \",value.id,React.createElement(\"span\",{className:\"online\"})),React.createElement(\"p\",null,\"new user for sq dashboard\"))));}))),React.createElement(\"div\",{className:\"mesgs\"},React.createElement(\"div\",{className:\"alert alert-success  select_user\"},React.createElement(\"strong\",{style:{marginLeft:\"19px\"}},this.state.select_username),React.createElement(\"img\",{src:\"https://ptetutorials.com/images/user-profile.png\",alt:\"sunil\",className:\"hear_user\"})),this.state.massage_box==true?React.createElement(\"div\",{className:\"msg_history\"},React.createElement(\"div\",{className:\"incoming_msg\"},this.state.msg_list.map(function(value,index){return React.createElement(\"div\",{className:\"received_msg\"},_this3.state.sel_u_id==value.send_Id?React.createElement(\"div\",{className:\"received_withd_msg\"},React.createElement(\"p\",{key:index},value.message,\" \"),React.createElement(\"span\",{className:\"time_date\"})):null,_this3.state.sel_u_id==value.received_Id?React.createElement(\"div\",{className:\"outgoing_msg\"},React.createElement(\"div\",{className:\"sent_msg\"},React.createElement(\"p\",{key:index},value.message,\" \"),React.createElement(\"span\",{className:\"time_date\"}))):null);}))):React.createElement(\"h2\",{className:\"msg_history\"},\" welcome Message Chatting\"),React.createElement(\"div\",{className:\"type_msg\"},React.createElement(\"div\",{className:\"input_msg_write\"},React.createElement(\"input\",{type:\"text\",ref:\"msg\",className:\"write_msg\",placeholder:\"Type a message\",value:this.state.message,onKeyPress:this.handleKeyPress.bind(this),onChange:this.handleChange.bind(this)}),React.createElement(\"button\",{className:\"msg_send_btn\",type:\"button\",onClick:this.handleSendMassage},React.createElement(\"i\",{className:\"fa fa-paper-plane\"})))))));}}]);return ChartRoom;}(Component);export default ChartRoom;","map":{"version":3,"sources":["/home/user/Desktop/milonux-sq-dashboard-59aefe7abad7/src/Personal/Layout/chart_room.js"],"names":["React","Component","useState","useEffect","Layout","Menu","Dropdown","Icon","Button","Avatar","Drawer","Input","AppRouter","NotificationTab","ReactApexChart","$","Popper","isAbsolute","styles","axios","Host","firebase","Config_chat","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","initializeApp","ChartRoom","props","selectUser","username","id","setState","msg_list","massage_box","select_username","received_id","sel_u_id","allMassageList","handleSendMassage","e","massage","refs","msg","value","newItem","user_Id","state","user_id","send_Id","received_Id","message","msg_Status","timestamp","database","ServerValue","TIMESTAMP","messageSend","push","online","user_list","userName","send_msg_list","received_list","send_id","text","user_text","user_state","user_Name","user_Email","massage_List","ref","child","profile_data","JSON","parse","sessionStorage","getItem","loadAllUserList","post","loginURL","email","promise","status","users_list","data","users","event","key","target","s_id","on","val","i","m_list","rsm_list","Object","values","keys","length","re_data","map","index","marginLeft","handleKeyPress","bind","handleChange"],"mappings":"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","sourcesContent":["import React, { Component, useState, useEffect }  from \"react\";\nimport { Layout, Menu, Dropdown, Icon, Button, Avatar, Drawer, Input } from \"antd\";\nimport AppRouter from \"../../router\";\nimport { NotificationTab } from \"../components/Header\";\nimport \"./PageLayout.scss\";\nimport ReactApexChart from 'react-apexcharts'\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport $ from 'jquery';\nimport Popper from 'popper.js';\nimport 'bootstrap/dist/js/bootstrap.bundle.min';\nimport { isAbsolute } from \"path\";\nimport * as styles  from \"./chat.scss\"\nimport axios from \"axios\";\nimport { Host } from  \"../../Host\";\nimport firebase from 'firebase';\n\nconst Config_chat = {\n  apiKey: \"AIzaSyB5fOOl4b5DpbBhaeXAL-61qkpJoENQeTY\",\n  authDomain: \"sqd-project.firebaseapp.com\",\n  databaseURL: \"https://sqd-project.firebaseio.com\",\n  projectId: \"sqd-project\",\n  storageBucket: \"sqd-project.appspot.com\",\n  messagingSenderId: \"727802836038\",\n  appId: \"1:727802836038:web:44732927a6e01d5abdc647\",\n  measurementId: \"G-YVGMP4HC63\"\n};\n\nfirebase.initializeApp(Config_chat);\n\n\nclass ChartRoom extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n        online:false,\n        massage_box:false,\n        select_username:'',\n        user_list:[],\n        userName:'Vamsi',\n        user_id:'',\n        sel_u_id:'',\n        send_msg_list:[],\n        received_list:[],\n        send_id:'',\n        received_id:'',\n        text:'sqd_massages',\n        user_text:'users',\n        user_state:'',\n        msg:'',\n        message:'',\n        user_Name:'',\n        user_Email:'',\n        massage_List:'',\n        msg_list:[{'massage':'hi'}]\n    }\n    this.messageSend = firebase.database().ref().child('messages/' + this.state.text);\n    this.allMassageList();\n\n\n\n\n  }\n\ncomponentWillMount() {\n    var profile_data = JSON.parse(sessionStorage.getItem(\"session_data\"));\n    this.setState({user_Name:profile_data['username']});\n    this.setState({user_Email:profile_data['email']});\n    this.loadAllUserList()\n    this.setState({user_id:profile_data['user_id']});\n}\n\nasync loadAllUserList()\n  {\n    this.setState({user_list:[]});\n    var profile_data = JSON.parse(sessionStorage.getItem(\"session_data\"));\n    const promise = await axios.post(Host.loginURL +\"/chat_user_api\", {username:profile_data['username'],\n                                                                    email:profile_data['email']});\n    const status = promise.status;\n    if(status===200)\n    {\n      const users_list= promise.data.users;\n      this.setState({user_list:users_list});\n    }\n  }\n\n\nselectUser = (username, id) => {\n    this.setState({msg_list:[]});\n    this.setState({massage_box:true});\n    this.setState({select_username:username});\n    this.setState({received_id:id});\n    this.setState({sel_u_id:id});\n    this.allMassageList(id);\n\n\n  };\n\n\n  handleSendMassage = (e) => {\n     this.setState({massage:this.refs.msg.value})\n      var newItem = {\n        user_Id:this.state.user_id,\n        send_Id:this.state.user_id,\n        received_Id:this.state.received_id,\n        message:this.state.message,\n        msg_Status:true,\n        timestamp : firebase.database.ServerValue.TIMESTAMP\n      }\n      this.messageSend.push(newItem);\n      this.setState({ message: '' });\n\n  }\n\n  handleKeyPress(event) {\n    if (event.key !== 'Enter') return;\n    this.handleSendMassage();\n  }\n\n  handleChange(event) {\n    this.setState({message: event.target.value});\n  }\n\n\n\nasync allMassageList(id){\n       const s_id = id;\n       this.msg = firebase.database().ref().child('messages/' + this.state.text).on('value', message => {\n            if ( message.val() != null){\n              var i;\n              var m_list = []\n              var rsm_list = Object.values(message.val());\n              for (i = 0; i < Object.keys(rsm_list).length; i++) {\n                if((this.state.user_id == rsm_list[i]['received_Id']) || (this.state.user_id == rsm_list[i]['send_Id'])){\n                      var re_data = rsm_list[i]\n                      m_list.push(re_data)\n                }\n               this.setState({msg_list:m_list});\n              }\n            }\n            else{\n                this.setState({ msg_list:[]});\n            }\n       });\n}\n\n\n\n\n\n  render() {\n\n\n\n    return (\n    <div className=\"messaging\">\n      <div className=\"inbox_msg\">\n        <div className=\"inbox_people\">\n\t  <div className=\"headind_srch\">\n\t\t<div className=\"recent_heading\">\n\t\t  <h4>Users</h4>\n\t\t</div>\n\t\t<div className=\"srch_bar\">\n\t\t  <div className=\"stylish-input-group\">\n\t\t\t<input type=\"text\" className=\"search-bar\"  placeholder=\"Search\"  / >\n\t\t\t</div>\n\t\t</div>\n\t  </div>\n\n\n\t  <div className=\"inbox_chat scroll\">\n\t  {this.state.user_list.map((value, index) =>\n\t\t<div className=\"chat_list active_chat\"   key={index} onClick={()=>this.selectUser(value.username, value.id)}>\n\t\t  <div className=\"chat_people\" value={this.state.select_username}>\n            <img src=\"https://ptetutorials.com/images/user-profile.png\" alt=\"sunil\" className=\"chat_img\" />\n\t\t\t<div className=\"chat_ib\">\n\t\t\t  <h5 value={value.id}>{value.username} {value.id}\n\n\t\t\t  <span className=\"online\"></span>\n\n\t\t\t   </h5>\n\t\t\t  <p>new user for sq dashboard</p>\n\t\t\t</div>\n\t\t  </div>\n\t\t</div>\n        )}\n        </div>\n\t</div>\n\n\n\n        <div className=\"mesgs\">\n        <div className=\"alert alert-success  select_user\">\n          <strong style={{marginLeft:\"19px\"}}>{this.state.select_username}</strong >\n         <img src=\"https://ptetutorials.com/images/user-profile.png\" alt=\"sunil\" className=\"hear_user\" />\n          </div>\n\n        {this.state.massage_box == true?\n          <div className=\"msg_history\">\n                  <div className=\"incoming_msg\">\n                         { this.state.msg_list.map((value, index) =>\n                              <div className=\"received_msg\">\n                              {this.state.sel_u_id == value.send_Id?\n                                <div className=\"received_withd_msg\">\n                                    <p key={index}>{value.message} </p>\n                                  <span className=\"time_date\"></span>\n                                  </div>:null\n                                  }\n                                  {this.state.sel_u_id == value.received_Id?\n                                  <div className=\"outgoing_msg\">\n                                        <div className=\"sent_msg\">\n                                        <p key={index}>{value.message} </p>\n                                        <span className=\"time_date\"></span>\n                                        </div>\n                                  </div>:null\n                               }\n                              </div>\n                          )}\n                        </div>\n\n            </div>:<h2 className=\"msg_history\"> welcome Message Chatting</h2>\n          }\n\n          <div className=\"type_msg\">\n            <div className=\"input_msg_write\">\n              <input type=\"text\"  ref='msg' className=\"write_msg\" placeholder=\"Type a message\"\n                                              value={this.state.message}\n                                              onKeyPress={this.handleKeyPress.bind(this)}\n                                              onChange={this.handleChange.bind(this)}/>\n              <button className=\"msg_send_btn\" type=\"button\" onClick={this.handleSendMassage}>\n                                    <i className=\"fa fa-paper-plane\"></i></button>\n            </div>\n          </div>\n\n        </div>\n  </div>\n</div>\n\n    );\n  }\n}\n\nexport default ChartRoom;\n"]},"metadata":{},"sourceType":"module"}