{"ast":null,"code":"import * as _ from 'lodash';\nimport * as EventUtils from '../utils/EventUtils';\n\nfunction setHighlight(item) {\n  item.onHover = function (ev) {\n    var shapes = ev.shapes;\n    var geom = ev.geom;\n    geom.highlightShapes(shapes);\n  };\n\n  return item;\n}\n\nexport var process = function (chart, config) {\n  var cLegend = _.cloneDeep(config.legend);\n\n  var isArr = Array.isArray(cLegend);\n\n  if (_.isNil(cLegend) || cLegend === false || isArr && cLegend.length === 0) {\n    return chart.legend(false);\n  }\n\n  if (cLegend === true) {\n    return chart.legend();\n  }\n\n  var arrLegend = isArr ? cLegend : [cLegend];\n\n  for (var _i = 0, arrLegend_1 = arrLegend; _i < arrLegend_1.length; _i++) {\n    var res = arrLegend_1[_i];\n\n    if (res.highlight) {\n      res = setHighlight(res);\n    }\n\n    var _loop_1 = function (item) {\n      if (res.hasOwnProperty(item)) {\n        if (item === 'onClick') {\n          var content_1 = res.onClick;\n\n          res.onClick = function (ev) {\n            content_1(ev, chart);\n          };\n        }\n\n        EventUtils.setSEvent(chart, 'legend', item, res[item]);\n      }\n    };\n\n    for (var item in res) {\n      _loop_1(item);\n    }\n\n    if (!_.isNil(res.legendMarker)) {\n      res['g2-legend-marker'] = res.legendMarker;\n    }\n\n    if (!_.isNil(res.legendListItem)) {\n      res['g2-legend-list-item'] = res.legendListItem;\n    }\n\n    if (!_.isNil(res.legendTitle)) {\n      res['g2-legend-title'] = res.legendTitle;\n    }\n\n    if (!_.isNil(res.legendList)) {\n      res['g2-legend-list'] = res.legendList;\n    }\n\n    res = _.omit(res, ['legendMarker', 'legendListItem', 'legendTitle', 'legendList']);\n\n    if (res.dataKey) {\n      if (res.show === false) {\n        chart.legend(res.dataKey, false);\n      } else {\n        var option = _.omit(res, ['dataKey', 'show']);\n\n        chart.legend(res.dataKey, option);\n      }\n    } else {\n      chart.legend(res);\n    }\n  }\n\n  return chart;\n};","map":null,"metadata":{},"sourceType":"module"}