{"ast":null,"code":"/**\n* Copyright 2012-2019, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar Lib = require('../../lib');\n\nvar Axes = require('../../plots/cartesian/axes');\n\nvar handleArrayContainerDefaults = require('../../plots/array_container_defaults');\n\nvar attributes = require('./attributes');\n\nvar name = 'images';\n\nmodule.exports = function supplyLayoutDefaults(layoutIn, layoutOut) {\n  var opts = {\n    name: name,\n    handleItemDefaults: imageDefaults\n  };\n  handleArrayContainerDefaults(layoutIn, layoutOut, opts);\n};\n\nfunction imageDefaults(imageIn, imageOut, fullLayout) {\n  function coerce(attr, dflt) {\n    return Lib.coerce(imageIn, imageOut, attributes, attr, dflt);\n  }\n\n  var source = coerce('source');\n  var visible = coerce('visible', !!source);\n  if (!visible) return imageOut;\n  coerce('layer');\n  coerce('xanchor');\n  coerce('yanchor');\n  coerce('sizex');\n  coerce('sizey');\n  coerce('sizing');\n  coerce('opacity');\n  var gdMock = {\n    _fullLayout: fullLayout\n  };\n  var axLetters = ['x', 'y'];\n\n  for (var i = 0; i < 2; i++) {\n    // 'paper' is the fallback axref\n    var axLetter = axLetters[i];\n    var axRef = Axes.coerceRef(imageIn, imageOut, gdMock, axLetter, 'paper');\n\n    if (axRef !== 'paper') {\n      var ax = Axes.getFromId(gdMock, axRef);\n\n      ax._imgIndices.push(imageOut._index);\n    }\n\n    Axes.coercePosition(imageOut, gdMock, coerce, axRef, axLetter, 0);\n  }\n\n  return imageOut;\n}","map":null,"metadata":{},"sourceType":"script"}