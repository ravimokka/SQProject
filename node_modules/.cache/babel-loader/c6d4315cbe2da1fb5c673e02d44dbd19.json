{"ast":null,"code":"/**\n* Copyright 2012-2019, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar isNumeric = require('fast-isnumeric');\n\nvar Lib = require('../../lib');\n\nvar ONEDAY = require('../../constants/numerical').ONEDAY;\n/**\n * Return a validated dtick value for this axis\n *\n * @param {any} dtick: the candidate dtick. valid values are numbers and strings,\n *     and further constrained depending on the axis type.\n * @param {string} axType: the axis type\n */\n\n\nexports.dtick = function (dtick, axType) {\n  var isLog = axType === 'log';\n  var isDate = axType === 'date';\n  var isCat = axType === 'category';\n  var dtickDflt = isDate ? ONEDAY : 1;\n  if (!dtick) return dtickDflt;\n\n  if (isNumeric(dtick)) {\n    dtick = Number(dtick);\n    if (dtick <= 0) return dtickDflt;\n\n    if (isCat) {\n      // category dtick must be positive integers\n      return Math.max(1, Math.round(dtick));\n    }\n\n    if (isDate) {\n      // date dtick must be at least 0.1ms (our current precision)\n      return Math.max(0.1, dtick);\n    }\n\n    return dtick;\n  }\n\n  if (typeof dtick !== 'string' || !(isDate || isLog)) {\n    return dtickDflt;\n  }\n\n  var prefix = dtick.charAt(0);\n  var dtickNum = dtick.substr(1);\n  dtickNum = isNumeric(dtickNum) ? Number(dtickNum) : 0;\n\n  if (dtickNum <= 0 || !( // \"M<n>\" gives ticks every (integer) n months\n  isDate && prefix === 'M' && dtickNum === Math.round(dtickNum) || // \"L<f>\" gives ticks linearly spaced in data (not in position) every (float) f\n  isLog && prefix === 'L' || // \"D1\" gives powers of 10 with all small digits between, \"D2\" gives only 2 and 5\n  isLog && prefix === 'D' && (dtickNum === 1 || dtickNum === 2))) {\n    return dtickDflt;\n  }\n\n  return dtick;\n};\n/**\n * Return a validated tick0 for this axis\n *\n * @param {any} tick0: the candidate tick0. Valid values are numbers and strings,\n *     further constrained depending on the axis type\n * @param {string} axType: the axis type\n * @param {string} calendar: for date axes, the calendar to validate/convert with\n * @param {any} dtick: an already valid dtick. Only used for D1 and D2 log dticks,\n *     which do not support tick0 at all.\n */\n\n\nexports.tick0 = function (tick0, axType, calendar, dtick) {\n  if (axType === 'date') {\n    return Lib.cleanDate(tick0, Lib.dateTick0(calendar));\n  }\n\n  if (dtick === 'D1' || dtick === 'D2') {\n    // D1 and D2 modes ignore tick0 entirely\n    return undefined;\n  } // Aside from date axes, tick0 must be numeric\n\n\n  return isNumeric(tick0) ? Number(tick0) : 0;\n};","map":null,"metadata":{},"sourceType":"script"}