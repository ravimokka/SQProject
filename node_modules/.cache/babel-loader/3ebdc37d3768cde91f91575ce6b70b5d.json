{"ast":null,"code":"import _regeneratorRuntime from\"/home/user/Desktop/milonux-sq-dashboard-59aefe7abad7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _classCallCheck from\"/home/user/Desktop/milonux-sq-dashboard-59aefe7abad7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/user/Desktop/milonux-sq-dashboard-59aefe7abad7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/user/Desktop/milonux-sq-dashboard-59aefe7abad7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/user/Desktop/milonux-sq-dashboard-59aefe7abad7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/home/user/Desktop/milonux-sq-dashboard-59aefe7abad7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/user/Desktop/milonux-sq-dashboard-59aefe7abad7/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{Layout,Menu,Dropdown,Icon,Button,Avatar,Drawer}from\"antd\";import{Link}from\"react-router-dom\";import AppRouter from\"../../router\";import{NotificationTab}from\"../components/Header\";import\"./PageLayout.scss\";import{Host}from\"../../Host\";import axios from\"axios\";import firebase from'firebase';import ChartRoom from\"./chart_room.js\";var Header=Layout.Header,Sider=Layout.Sider,Content=Layout.Content;var SubMenu=Menu.SubMenu;var messageMenu=React.createElement(Menu,null,React.createElement(Menu.Item,null,\"Message\"));var PageLayout=/*#__PURE__*/function(_Component){_inherits(PageLayout,_Component);function PageLayout(props){var _this;_classCallCheck(this,PageLayout);_this=_possibleConstructorReturn(this,_getPrototypeOf(PageLayout).call(this,props));_this.toggle=function(){_this.setState({collapsed:!_this.state.collapsed});};_this.state={visible:false};_this.showDrawer=function(){_this.setState({visible:true});};_this.onClose=function(){_this.setState({visible:false});};_this.handleSubmitLogout=function(e){_this.userLogout();};_this.state={collapsed:false,windowWidth:'',windowHeight:'',values:[{name:\"John Doe\",date:\"2017-09-15\"}],User_Name:'',User_Email:'',userRights:[]};_this.updateDimensions=_this.updateDimensions.bind(_assertThisInitialized(_this));return _this;}_createClass(PageLayout,[{key:\"componentWillMount\",value:function componentWillMount(){var profile_data=JSON.parse(sessionStorage.getItem(\"session_data\"));if(profile_data!=null){this.setState({User_Name:profile_data['first_name']+\"  \"+profile_data['last_name']});this.setState({User_Email:profile_data['email']});this.setState({user_id:profile_data['user_id']});if(profile_data['user_rights']!=''){var i;var userRights=[];var index=7;for(var i=0;i<profile_data['user_rights'].length;i++){index+=1;var u_rights=profile_data['user_rights'][i];if(u_rights=='Financial'){var type='transaction';}if(u_rights=='Operational'){var type='solution';}if(u_rights=='Management'){var type='home';}var menuList={'type':type,'menuName':u_rights,'linkName':u_rights.toLowerCase()+'-charts','index':index};userRights.push(menuList);}this.setState({userRights:userRights});}}}},{key:\"updateDimensions\",value:function updateDimensions(){var w=window,d=document,documentElement=d.documentElement,body=d.getElementsByTagName('body')[0],width=w.innerWidth||documentElement.clientWidth||body.clientWidth,height=w.innerHeight||documentElement.clientHeight||body.clientHeight;this.setState({windowWidth:width,windowHeight:height});width<=991?this.setState({collapsed:true}):this.setState({collapsed:false});}},{key:\"componentDidMount\",value:function componentDidMount(){window.addEventListener(\"resize\",this.updateDimensions);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){window.removeEventListener(\"resize\",this.updateDimensions);}},{key:\"userLogout\",value:function userLogout(){return _regeneratorRuntime.async(function userLogout$(_context){while(1){switch(_context.prev=_context.next){case 0:firebase.database().ref().child('messages/'+'users').orderByChild(\"user_Id\").equalTo(this.state.user_id).on(\"value\",function(snapshot){if(snapshot.val()!=null){if(Object.values(snapshot.val()).length>=1){snapshot.forEach(function(data){var record=data.val();var key=data.key;var today=new Date();var time=today.getHours()+':'+today.getMinutes()+':'+today.getSeconds();var date=today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();firebase.database().ref().child('messages/'+'users/'+key).update({user_status:\"offline\",time:time});});}}else{}});case 1:case\"end\":return _context.stop();}}},null,this);}},{key:\"render\",value:function render(){var userMenu=React.createElement(Menu,{style:{minWidth:\"260px\"},className:\"dropdown-menuuser\"},React.createElement(Menu.Item,{style:{padding:\"0\"}},React.createElement(\"div\",{className:\"usermenu-header\"},React.createElement(\"div\",null,React.createElement(\"div\",null,React.createElement(Avatar,{src:\"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\"}))),React.createElement(\"div\",null,React.createElement(\"h6\",null,this.state.User_Name),React.createElement(\"span\",null,this.state.User_Email)))),React.createElement(Menu.Item,null,React.createElement(Link,{to:{pathname:'/persoanl-account',data:this.state.profile_data}},\" My Account\")),React.createElement(Menu.Item,null,React.createElement(Link,{to:{pathname:'/add-user',data:this.state.profile_data}},\"Add User\")),React.createElement(Menu.Item,null,React.createElement(Link,{to:\"\"},\"Company Settings\")),React.createElement(Menu.Item,null,React.createElement(Link,{to:\"\"},React.createElement(Button,{type:\"primary\",block:true,onClick:this.handleSubmitLogout},\"Logout\"))));return React.createElement(Layout,null,React.createElement(Sider,{trigger:null,collapsible:true,collapsed:this.state.collapsed,width:220,className:\"mi-sidebar\",style:{backgroundColor:\"white\"}/* style={{\n            overflow: 'auto',\n            height: '100vh',\n            position: 'fixed',\n            left: 0,\n          }} */},React.createElement(\"div\",{className:\"navbar-logo\",style:{backgroundColor:\"white\"}},React.createElement(Link,{to:\"/personal-home\"},React.createElement(\"img\",{src:\"http://sq-dashboards.s3-website-ap-southeast-1.amazonaws.com/assets/images/logo.png\"}))),React.createElement(Menu,{theme:\"light\",mode:\"inline\",defaultSelectedKeys:[\"1\"]},React.createElement(Menu.Item,{key:\"1\"},React.createElement(Link,{to:\"/personal-home\"},React.createElement(Icon,{type:\"dashboard\"}),React.createElement(\"span\",null,\"Dashboard\"))),this.state.userRights.map(function(value,index){return React.createElement(Menu.Item,{key:value.index},React.createElement(Link,{to:value.linkName},React.createElement(Icon,{type:value.type}),React.createElement(\"span\",null,value.menuName)));}),React.createElement(Menu.Item,{key:\"11\"},React.createElement(Link,{to:\"/personal-source\"},React.createElement(Icon,{type:\"project\"}),React.createElement(\"span\",null,\"Source\"))),React.createElement(Menu.Item,{key:\"12\"},React.createElement(Link,{to:\"/personal-documents\"},React.createElement(Icon,{type:\"file\"}),React.createElement(\"span\",null,\"Documents\"))),React.createElement(SubMenu,{key:\"sub4\",title:React.createElement(\"span\",null,React.createElement(Icon,{type:\"setting\"}),React.createElement(\"span\",null,\"Settings\"))},React.createElement(Menu.Item,{key:\"10\"},React.createElement(Link,{to:\"/persoanl-account\"},\"My Account\")),React.createElement(Menu.Item,{key:\"11\"},\"Company Settings\")))),React.createElement(Layout/* style={{ marginLeft: 220 }} */,null,React.createElement(Header,{className:\"mi-header\",style:{/* position: 'fixed', zIndex: 1, width: '100%', */backgroundColor:\"white\",color:\"black\",padding:0}},React.createElement(\"div\",{className:\"header-block\"},React.createElement(\"span\",{className:\"header-trigger\"},React.createElement(Icon,{style:{color:\"black\"},className:\"trigger\",type:this.state.collapsed?\"menu-unfold\":\"menu-fold\",onClick:this.toggle})),React.createElement(\"ul\",{className:\"nav-actions\"},React.createElement(\"li\",null,React.createElement(Dropdown,{overlay:React.createElement(NotificationTab,null),placement:\"bottomRight\",trigger:[\"click\"],className:\"dropdown-notification\"},React.createElement(\"a\",{className:\"ant-dropdown-link d-dropdown-link\",href:\"#\"},React.createElement(Icon,{type:\"bell\",style:{color:\"black\"}})))),React.createElement(\"li\",null,React.createElement(Dropdown,{overlay:userMenu,placement:\"bottomRight\",trigger:[\"click\"]},React.createElement(\"a\",{className:\"ant-dropdown-link d-dropdown-link\",href:\"#\"},React.createElement(Icon,{type:\"user\",style:{color:\"black\"}})))),React.createElement(\"li\",null,React.createElement(\"a\",{className:\"ant-dropdown-link d-dropdown-link\",href:\"#\",onClick:this.showDrawer},React.createElement(Icon,{type:\"message\",style:{color:\"black\"}})),React.createElement(Drawer,{title:\"\",placement:\"right\",closable:false,onClose:this.onClose,visible:this.state.visible,width:\"800px\",className:\"drawer-chat\"},React.createElement(ChartRoom,null)))))),React.createElement(Content,{style:{padding:40,minHeight:280}},React.createElement(AppRouter,null))));}}]);return PageLayout;}(Component);PageLayout.getSelectedPictures=function(){return PageLayout.state.profile_data;};export default PageLayout;","map":{"version":3,"sources":["/home/user/Desktop/milonux-sq-dashboard-59aefe7abad7/src/Management/Layout/PageLayout.js"],"names":["React","Component","Layout","Menu","Dropdown","Icon","Button","Avatar","Drawer","Link","AppRouter","NotificationTab","Host","axios","firebase","ChartRoom","Header","Sider","Content","SubMenu","messageMenu","PageLayout","props","toggle","setState","collapsed","state","visible","showDrawer","onClose","handleSubmitLogout","e","userLogout","windowWidth","windowHeight","values","name","date","User_Name","User_Email","userRights","updateDimensions","bind","profile_data","JSON","parse","sessionStorage","getItem","user_id","i","index","length","u_rights","type","menuList","toLowerCase","push","w","window","d","document","documentElement","body","getElementsByTagName","width","innerWidth","clientWidth","height","innerHeight","clientHeight","addEventListener","removeEventListener","database","ref","child","orderByChild","equalTo","on","snapshot","val","Object","forEach","data","record","key","today","Date","time","getHours","getMinutes","getSeconds","getFullYear","getMonth","getDate","update","user_status","userMenu","minWidth","padding","pathname","backgroundColor","map","value","linkName","menuName","color","minHeight","getSelectedPictures"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Layout, Menu, Dropdown, Icon, Button, Avatar, Drawer} from \"antd\";\nimport { Link } from \"react-router-dom\";\nimport AppRouter from \"../../router\";\nimport { NotificationTab } from \"../components/Header\";\nimport \"./PageLayout.scss\";\nimport { Host } from  \"../../Host\";\nimport axios from \"axios\";\nimport firebase from 'firebase';\nimport ChartRoom from \"./chart_room.js\"\n\nconst { Header, Sider, Content } = Layout;\nconst { SubMenu } = Menu;\n\n\n\nconst messageMenu = (\n  <Menu>\n    <Menu.Item>Message</Menu.Item>\n  </Menu>\n);\n\nclass PageLayout extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      collapsed: false,\n      windowWidth: '',\n      windowHeight: '',\n      values: [{ name: \"John Doe\", date: \"2017-09-15\" }],\n      User_Name:'',\n     User_Email:'',\n     userRights:[]\n    }\n    this.updateDimensions = this.updateDimensions.bind(this);\n  }\n\ncomponentWillMount() {\n     var profile_data = JSON.parse(sessionStorage.getItem(\"session_data\"));\n    if(profile_data != null){\n        this.setState({User_Name:profile_data['first_name'] + \"  \" + profile_data['last_name']});\n        this.setState({User_Email:profile_data['email']});\n        this.setState({user_id:profile_data['user_id']});\n        if(profile_data['user_rights'] !=''){\n          var i;\n          var userRights = []\n          var index = 7\n          for (var i=0; i <profile_data['user_rights'].length; i++){\n                index +=1\n                var u_rights = profile_data['user_rights'][i]\n                if(u_rights == 'Financial'){var type = 'transaction'}\n                if(u_rights == 'Operational'){var type = 'solution'}\n                if(u_rights == 'Management'){var type = 'home'}\n                var menuList= {'type':type,'menuName':u_rights, 'linkName':u_rights.toLowerCase() + '-charts' ,\n                             'index':index}\n                userRights.push(menuList)\n            }\n            this.setState({userRights:userRights})\n          }\n\n    }\n  }\n\n\nstatic getSelectedPictures = () => {\n      return this.state.profile_data;\n  }\n\n\n  updateDimensions() {\n    var w = window,\n      d = document,\n      documentElement = d.documentElement,\n      body = d.getElementsByTagName('body')[0],\n      width = w.innerWidth || documentElement.clientWidth || body.clientWidth,\n      height = w.innerHeight || documentElement.clientHeight || body.clientHeight;\n    this.setState({ windowWidth: width, windowHeight: height });\n    width <= 991 ? this.setState({ collapsed: true }) : this.setState({ collapsed: false })\n\n  }\n  componentDidMount() {\n    window.addEventListener(\"resize\", this.updateDimensions);\n  }\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.updateDimensions);\n  }\n\n\n  toggle = () => {\n    this.setState({\n      collapsed: !this.state.collapsed\n    });\n  };\n\n  state = { visible: false };\n\n  showDrawer = () => {\n    this.setState({\n      visible: true,\n    });\n  };\n\n  onClose = () => {\n    this.setState({\n      visible: false,\n    });\n  };\n\nhandleSubmitLogout = (e) => {\n    this.userLogout();\n};\n\n  async userLogout() {\n\n  firebase.database().ref().child('messages/' + 'users').orderByChild(\"user_Id\").equalTo(this.state.user_id)\n      .on(\"value\", function(snapshot) {\n          if (snapshot.val() != null){\n              if(Object.values(snapshot.val()).length >= 1){\n                snapshot.forEach(function(data) {\n                var record = data.val();\n                var key = data.key;\n                var today = new Date();\n                var time = today.getHours() + ':' + today.getMinutes() + ':' + today.getSeconds();\n                var date = today.getFullYear() + '-' + (today.getMonth() + 1) + '-' + today.getDate();\n                firebase.database().ref().child('messages/' + 'users/'+ key).update({ user_status: \"offline\", time:time });\n                });\n              }\n          }\n         else{\n\n         }\n    });\n}\n\n\n\n  render() {\n\n  const userMenu = (\n  <Menu style={{ minWidth: \"260px\" }} className=\"dropdown-menuuser\">\n    <Menu.Item style={{ padding: \"0\" }}>\n      <div className=\"usermenu-header\">\n        <div>\n          <div>\n            <Avatar src=\"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\" />\n          </div>\n        </div>\n        <div>\n          <h6>{this.state.User_Name}</h6>\n          <span>{this.state.User_Email}</span>\n        </div>\n      </div>\n    </Menu.Item>\n    <Menu.Item>\n      <Link to={{ pathname: '/persoanl-account', data:this.state.profile_data}}> My Account</Link>\n    </Menu.Item>\n    <Menu.Item>\n      <Link to={{ pathname: '/add-user', data:this.state.profile_data}}>Add User</Link>\n    </Menu.Item>\n    <Menu.Item>\n      <Link to=\"\">Company Settings</Link>\n    </Menu.Item>\n    <Menu.Item>\n      <Link to=\"\">\n        <Button type=\"primary\" block onClick={this.handleSubmitLogout}>\n          Logout\n        </Button>\n      </Link>\n    </Menu.Item>\n  </Menu>\n);\n\n    return (\n      <Layout>\n        <Sider\n          trigger={null}\n          collapsible\n          collapsed={this.state.collapsed}\n          width={220}\n          className=\"mi-sidebar\" style={{backgroundColor:\"white\"}}\n          /* style={{\n            overflow: 'auto',\n            height: '100vh',\n            position: 'fixed',\n            left: 0,\n          }} */\n        >\n          <div className=\"navbar-logo\" style={{ backgroundColor: \"white\"}}>\n            <Link to=\"/personal-home\">\n              <img src=\"http://sq-dashboards.s3-website-ap-southeast-1.amazonaws.com/assets/images/logo.png\" />\n            </Link>\n          </div>\n          <Menu theme=\"light\" mode=\"inline\" defaultSelectedKeys={[\"1\"]}>\n            <Menu.Item key=\"1\">\n              <Link to=\"/personal-home\">\n                <Icon type=\"dashboard\" />\n                <span>Dashboard</span>\n              </Link>\n            </Menu.Item>\n\n            {/*\n            <Menu.Item key=\"4\">\n              <Link to=\"/personal-operations\">\n                <Icon type=\"solution\" />\n                <span>Operations</span>\n              </Link>\n            </Menu.Item>\n            <Menu.Item key=\"5\">\n              <Link to=\"/personal-finance\">\n                <Icon type=\"transaction\" />\n                <span>Finance</span>\n              </Link>\n            </Menu.Item>\n            <Menu.Item key=\"6\">\n              <Link to=\"/personal-hr\">\n                <Icon type=\"audit\" />\n                <span>HR</span>\n              </Link>\n            </Menu.Item>\n            <Menu.Item key=\"7\">\n              <Link to=\"/personal-marketing\">\n                <Icon type=\"notification\" />\n                <span>Marketing</span>\n              </Link>\n            </Menu.Item> */}\n\n\n          { this.state.userRights.map((value, index) =>\n            <Menu.Item key={value.index}>\n              <Link to={value.linkName}>\n                <Icon type={value.type} />\n                <span>{value.menuName}</span>\n              </Link>\n            </Menu.Item>\n            )}\n\n            {/*\n             <Menu.Item key=\"14\">\n              <Link to=\"/dashboard\">\n                <Icon type=\"dashboard\" />\n                <span>Chart Dashboard</span>\n              </Link>\n            </Menu.Item>\n           */}\n\n            <Menu.Item key=\"11\">\n              <Link to=\"/personal-source\">\n                <Icon type=\"project\" />\n                <span>Source</span>\n              </Link>\n            </Menu.Item>\n            <Menu.Item key=\"12\">\n              <Link to=\"/personal-documents\">\n                <Icon type=\"file\" />\n                <span>Documents</span>\n              </Link>\n            </Menu.Item>\n            <SubMenu\n              key=\"sub4\"\n              title={\n                <span>\n                  <Icon type=\"setting\" />\n                  <span>Settings</span>\n                </span>\n              }\n            >\n              <Menu.Item key=\"10\">\n                <Link to='/persoanl-account'>My Account</Link>\n              </Menu.Item>\n              <Menu.Item key=\"11\">Company Settings</Menu.Item>\n            </SubMenu>\n          </Menu>\n        </Sider>\n        <Layout /* style={{ marginLeft: 220 }} */>\n          <Header className=\"mi-header\" style={{ /* position: 'fixed', zIndex: 1, width: '100%', */\n                                                       backgroundColor: \"white\", color:\"black\", padding: 0 }}>\n            <div className=\"header-block\">\n              <span className=\"header-trigger\">\n                <Icon\n                  style={{ color: \"black\"}}\n                  className=\"trigger\"\n                  type={this.state.collapsed ? \"menu-unfold\" : \"menu-fold\"}\n                  onClick={this.toggle}\n                />\n              </span>\n              <ul className=\"nav-actions\">\n                <li>\n                  <Dropdown\n                    overlay={<NotificationTab />}\n                    placement=\"bottomRight\"\n                    trigger={[\"click\"]}\n                    className=\"dropdown-notification\"\n                  >\n                    <a className=\"ant-dropdown-link d-dropdown-link\" href=\"#\">\n                      <Icon type=\"bell\"  style={{ color: \"black\"}} />\n                    </a>\n                  </Dropdown>\n                </li>\n                <li>\n                  <Dropdown\n                    overlay={userMenu}\n                    placement=\"bottomRight\"\n                    trigger={[\"click\"]}\n                  >\n                    <a className=\"ant-dropdown-link d-dropdown-link\" href=\"#\">\n                      <Icon type=\"user\"  style={{ color: \"black\"}} />\n                    </a>\n                  </Dropdown>\n                </li>\n               <li>\n                    <a className=\"ant-dropdown-link d-dropdown-link\" href=\"#\" onClick={this.showDrawer}>\n                      <Icon type=\"message\"  style={{ color: \"black\"}} />\n                    </a>\n                  <Drawer\n                    title=\"\"\n                    placement=\"right\"\n                    closable={false}\n                    onClose={this.onClose}\n                    visible={this.state.visible}\n                    width=\"800px\"\n                    className=\"drawer-chat\"\n                  >\n                      <ChartRoom />\n\n\n\n\n                    {/* <div className=\"chat-lists\">\n                      <div className=\"chat-item chat-left\">\n                        <div className=\"chat-media\">\n                          <div className=\"chat-media-icon\">\n                            <Icon type=\"user\" />\n                          </div>\n                        </div>\n                        <div className=\"chat-denote\">\n                          <div className=\"chat-message\">\n                            <div className=\"chat-text\">\n                              Hi, Received Msg\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n\n                      <div className=\"chat-item chat-right\">\n                        <div className=\"chat-media\">\n                          <div className=\"chat-media-icon\">\n                            <Icon type=\"user\" />\n                          </div>\n                        </div>\n                        <div className=\"chat-denote\">\n                          <div className=\"chat-message\">\n                            <div className=\"chat-text\">\n                              Hello, Send Msg\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n\n                      <div className=\"chat-item chat-right\">\n                        <div className=\"chat-media\">\n                          <div className=\"chat-media-icon\">\n                            <Icon type=\"user\" />\n                          </div>\n                        </div>\n                        <div className=\"chat-denote\">\n                          <div className=\"chat-message\">\n                            <div className=\"chat-text\">\n                              {this.state.sendMsg}\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n\n\n                    </div>\n                    <div className=\"chat-input-wrap\">\n                      <div className=\"chat-input-group\">\n                        <Input size=\"large\" placeholder=\"Type your message here...\" />\n                        <span className=\"chat-input-appended\">\n                          <Button type=\"primary\" className=\"btn-chat-send\" onClick={this.sendMassage}>\n                            <img src=\"assets/images/paper-plane.png\" alt=\"\"/>\n                          </Button>\n                        </span>\n                      </div>\n                    </div>  */}\n\n\n                  </Drawer>\n                </li>\n              </ul>\n            </div>\n          </Header>\n          <Content\n            style={{\n              padding: 40,\n              minHeight: 280\n            }}\n          >\n            <AppRouter />\n\n\n\n          </Content>\n        </Layout>\n      </Layout>\n\n    );\n  }\n}\n\nexport default PageLayout;\n"]},"metadata":{},"sourceType":"module"}