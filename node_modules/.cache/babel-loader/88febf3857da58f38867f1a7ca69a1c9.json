{"ast":null,"code":"/**\n* Copyright 2012-2019, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar d3 = require('d3');\n\nvar Color = require('../../components/color');\n\nvar Drawing = require('../../components/drawing');\n\nvar Colorscale = require('../../components/colorscale');\n\nfunction style(gd, calcTrace) {\n  if (calcTrace) styleTrace(gd, calcTrace);\n}\n\nfunction styleTrace(gd, calcTrace) {\n  var trace = calcTrace[0].trace;\n  var s = calcTrace[0].node3;\n  var locs = s.selectAll('.choroplethlocation');\n  var marker = trace.marker || {};\n  var markerLine = marker.line || {};\n  var sclFunc = Colorscale.makeColorScaleFuncFromTrace(trace);\n  locs.each(function (d) {\n    d3.select(this).attr('fill', sclFunc(d.z)).call(Color.stroke, d.mlc || markerLine.color).call(Drawing.dashLine, '', d.mlw || markerLine.width || 0).style('opacity', marker.opacity);\n  });\n  Drawing.selectedPointStyle(locs, trace, gd);\n}\n\nfunction styleOnSelect(gd, calcTrace) {\n  var s = calcTrace[0].node3;\n  var trace = calcTrace[0].trace;\n\n  if (trace.selectedpoints) {\n    Drawing.selectedPointStyle(s.selectAll('.choroplethlocation'), trace, gd);\n  } else {\n    styleTrace(gd, calcTrace);\n  }\n}\n\nmodule.exports = {\n  style: style,\n  styleOnSelect: styleOnSelect\n};","map":null,"metadata":{},"sourceType":"script"}