{"ast":null,"code":"/**\n* Copyright 2012-2019, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar Lib = require('../../lib');\n\nvar Template = require('../../plot_api/plot_template');\n\nvar axisIds = require('../../plots/cartesian/axis_ids');\n\nvar attributes = require('./attributes');\n\nvar oppAxisAttrs = require('./oppaxis_attributes');\n\nmodule.exports = function handleDefaults(layoutIn, layoutOut, axName) {\n  var axIn = layoutIn[axName];\n  var axOut = layoutOut[axName];\n  if (!(axIn.rangeslider || layoutOut._requestRangeslider[axOut._id])) return; // not super proud of this (maybe store _ in axis object instead\n\n  if (!Lib.isPlainObject(axIn.rangeslider)) {\n    axIn.rangeslider = {};\n  }\n\n  var containerIn = axIn.rangeslider;\n  var containerOut = Template.newContainer(axOut, 'rangeslider');\n\n  function coerce(attr, dflt) {\n    return Lib.coerce(containerIn, containerOut, attributes, attr, dflt);\n  }\n\n  var rangeContainerIn, rangeContainerOut;\n\n  function coerceRange(attr, dflt) {\n    return Lib.coerce(rangeContainerIn, rangeContainerOut, oppAxisAttrs, attr, dflt);\n  }\n\n  var visible = coerce('visible');\n  if (!visible) return;\n  coerce('bgcolor', layoutOut.plot_bgcolor);\n  coerce('bordercolor');\n  coerce('borderwidth');\n  coerce('thickness');\n  coerce('autorange', !axOut.isValidRange(containerIn.range));\n  coerce('range');\n  var subplots = layoutOut._subplots;\n\n  if (subplots) {\n    var yIds = subplots.cartesian.filter(function (subplotId) {\n      return subplotId.substr(0, subplotId.indexOf('y')) === axisIds.name2id(axName);\n    }).map(function (subplotId) {\n      return subplotId.substr(subplotId.indexOf('y'), subplotId.length);\n    });\n    var yNames = Lib.simpleMap(yIds, axisIds.id2name);\n\n    for (var i = 0; i < yNames.length; i++) {\n      var yName = yNames[i];\n      rangeContainerIn = containerIn[yName] || {};\n      rangeContainerOut = Template.newContainer(containerOut, yName, 'yaxis');\n      var yAxOut = layoutOut[yName];\n      var rangemodeDflt;\n\n      if (rangeContainerIn.range && yAxOut.isValidRange(rangeContainerIn.range)) {\n        rangemodeDflt = 'fixed';\n      }\n\n      var rangeMode = coerceRange('rangemode', rangemodeDflt);\n\n      if (rangeMode !== 'match') {\n        coerceRange('range', yAxOut.range.slice());\n      }\n    }\n  } // to map back range slider (auto) range\n\n\n  containerOut._input = containerIn;\n};","map":null,"metadata":{},"sourceType":"script"}