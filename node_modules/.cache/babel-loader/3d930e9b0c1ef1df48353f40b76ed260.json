{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport * as _ from 'lodash';\nimport * as EventUtils from '../utils/EventUtils';\nimport * as setCustomFormatter from './setCustomFormatter';\n\nfunction setRotatePolarAxis(chart, axisItem, coord, data) {\n  var polarLabel = _.get(axisItem, 'polarLabel');\n\n  var rotate = _.get(axisItem, 'polarLabel.rotate');\n\n  if (!rotate) {\n    return;\n  }\n\n  var tickStyle = {};\n\n  if (rotate === 'parallel') {\n    tickStyle = {\n      rotate: coord.startAngle,\n      textAlign: 'center'\n    };\n  } else if (rotate === 'normal') {\n    tickStyle = {\n      rotate: coord.startAngle + 90,\n      textAlign: 'right'\n    };\n  }\n\n  var offsetX = _.get(axisItem, 'polarLabel.offsetX');\n\n  var offsetY = _.get(axisItem, 'polarLabel.offsetY');\n\n  data.forEach(function (res, i) {\n    chart.guide().text(__assign({\n      position: [i, 0],\n      content: data[i][axisItem.dataKey],\n      style: __assign({\n        polarLabel: polarLabel\n      }, tickStyle)\n    }, offsetX, offsetY));\n  });\n}\n\nexport var process = function (chart, config) {\n  var cAxis = _.cloneDeep(config.axis);\n\n  var isArr = _.isArray(cAxis);\n\n  if (_.isNil(cAxis) || cAxis === false || isArr && cAxis.length === 0) {\n    return chart.axis(false);\n  }\n\n  if (cAxis === true) {\n    return chart.axis();\n  }\n\n  var arrAxis = isArr ? cAxis : [cAxis];\n  var coord = config.coord,\n      data = config.data;\n\n  var _loop_1 = function (res) {\n    if (coord && coord.type === 'polar' && coord.direction === 'rotate') {\n      setRotatePolarAxis(chart, res, coord, data);\n    }\n\n    if (res.label) {\n      res.label = setCustomFormatter.supportD3Formatter(res.label);\n    }\n\n    for (var item in res) {\n      if (res.hasOwnProperty(item)) {\n        var name_1 = item === 'tickLine' ? 'ticks' : item;\n        EventUtils.setSEvent(chart, 'axis', name_1, res[item]);\n      }\n    }\n\n    if (res.dataKey) {\n      if (res.show === false) {\n        chart.axis(res.dataKey, false);\n      } else {\n        var options = _.omit(res, ['show', 'dataKey']);\n\n        var label = options.label;\n\n        if (label && _.isNumber(label.density) && 0 < label.density && label.density < 1 && _.isFunction(label.formatter)) {\n          var gap_1 = Math.floor(1 / label.density);\n          var formatter_1 = label.formatter;\n\n          options.label.formatter = function (val, item, i) {\n            if (i % gap_1) {\n              return ' ';\n            } else {\n              return formatter_1(val, item, i);\n            }\n          };\n        }\n\n        chart.axis(res.dataKey, options);\n      }\n    } else {\n      chart.axis(res);\n    }\n  };\n\n  for (var _i = 0, arrAxis_1 = arrAxis; _i < arrAxis_1.length; _i++) {\n    var res = arrAxis_1[_i];\n\n    _loop_1(res);\n  }\n\n  return chart;\n};","map":{"version":3,"sources":["../../src/components/setAxisConfig.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as _ from 'lodash';\nimport * as EventUtils from '../utils/EventUtils';\nimport * as setCustomFormatter from './setCustomFormatter';\nfunction setRotatePolarAxis(chart, axisItem, coord, data) {\n    var polarLabel = _.get(axisItem, 'polarLabel');\n    var rotate = _.get(axisItem, 'polarLabel.rotate');\n    if (!rotate) {\n        return;\n    }\n    var tickStyle = {};\n    if (rotate === 'parallel') {\n        tickStyle = {\n            rotate: coord.startAngle,\n            textAlign: 'center'\n        };\n    }\n    else if (rotate === 'normal') {\n        tickStyle = {\n            rotate: coord.startAngle + 90,\n            textAlign: 'right'\n        };\n    }\n    var offsetX = _.get(axisItem, 'polarLabel.offsetX');\n    var offsetY = _.get(axisItem, 'polarLabel.offsetY');\n    data.forEach(function (res, i) {\n        chart.guide().text(__assign({ position: [i, 0], content: data[i][axisItem.dataKey], style: __assign({ polarLabel: polarLabel }, tickStyle) }, offsetX, offsetY));\n    });\n}\nexport var process = function (chart, config) {\n    var cAxis = _.cloneDeep(config.axis);\n    var isArr = _.isArray(cAxis);\n    if (_.isNil(cAxis) || cAxis === false ||\n        (isArr && cAxis.length === 0)) {\n        return chart.axis(false);\n    }\n    if (cAxis === true) {\n        return chart.axis();\n    }\n    var arrAxis = isArr ? cAxis : [cAxis];\n    var coord = config.coord, data = config.data;\n    var _loop_1 = function (res) {\n        if (coord && coord.type === 'polar' && coord.direction === 'rotate') {\n            setRotatePolarAxis(chart, res, coord, data);\n        }\n        if (res.label) {\n            res.label = setCustomFormatter.supportD3Formatter(res.label);\n        }\n        for (var item in res) {\n            if (res.hasOwnProperty(item)) {\n                var name_1 = item === 'tickLine' ? 'ticks' : item;\n                EventUtils.setSEvent(chart, 'axis', name_1, res[item]);\n            }\n        }\n        if (res.dataKey) {\n            if (res.show === false) {\n                chart.axis(res.dataKey, false);\n            }\n            else {\n                var options = _.omit(res, ['show', 'dataKey']);\n                var label = options.label;\n                if (label && _.isNumber(label.density)\n                    && (0 < label.density) && (label.density < 1)\n                    && _.isFunction(label.formatter)) {\n                    var gap_1 = Math.floor(1 / label.density);\n                    var formatter_1 = label.formatter;\n                    options.label.formatter = function (val, item, i) {\n                        if (i % gap_1) {\n                            return ' ';\n                        }\n                        else {\n                            return formatter_1(val, item, i);\n                        }\n                    };\n                }\n                chart.axis(res.dataKey, options);\n            }\n        }\n        else {\n            chart.axis(res);\n        }\n    };\n    for (var _i = 0, arrAxis_1 = arrAxis; _i < arrAxis_1.length; _i++) {\n        var res = arrAxis_1[_i];\n        _loop_1(res);\n    }\n    return chart;\n};\n//# sourceMappingURL=setAxisConfig.js.map"]},"metadata":{},"sourceType":"module"}